(window.webpackJsonp=window.webpackJsonp||[]).push([[401],{3960:function(t,e,n){var content=n(4375);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("d7b24654",content,!0,{sourceMap:!1})},4374:function(t,e,n){"use strict";n(3960)},4375:function(t,e,n){var o=n(15)((function(i){return i[1]}));o.push([t.i,".o-commentArea__alertLink[data-v-60f94f0d]{color:var(--color-text-secondary);text-decoration:underline}@media only screen and (min-width:769px){.o-commentArea__alertLink[data-v-60f94f0d]{transition:all .2s cubic-bezier(1,0,0,1)}.o-commentArea__alertLink[data-v-60f94f0d]:hover{color:var(--color-text-primary)}}",""]),o.locals={},t.exports=o},4444:function(t,e,n){"use strict";n(11),n(26),n(12);var o={components:{Avatar:()=>Promise.resolve().then(n.bind(null,192)),NtLinkFunctional:()=>Promise.resolve().then(n.bind(null,191))},props:{note:{type:Object,required:!0},isEditing:{type:Boolean,required:!0}},computed:{isEmailUnverified(){return this.currentUser&&!this.currentUser.emailConfirmedFlag}},methods:{pickUrlnameClick(){this.$emit("openPickUrlnameModal")},signupClick(){this.$emit("signupClick")}}},m=(n(4374),n(7)),component=Object(m.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isEditing?t._e():n("div",{staticClass:"o-commentArea__alert text-sm leading-6"},[t.currentUser?[t.note.canComment?t.note.commentViewable?t.isEmailUnverified?n("div",{staticClass:"flex items-center gap-4 pt-2 pb-4"},[n("span",{staticClass:"text-text-clickable-icon"},[n("nt-link-functional",{staticClass:"o-commentArea__alertLink",attrs:{href:"https://help-note.com/hc/ja/articles/360011357753",target:"_blank"}},[t._v("\n          メール認証\n        ")]),t._v("\n        を終えるとコメントできます。\n      ")],1)]):t._e():n("div",{staticClass:"flex items-center gap-4 pt-2 pb-4"},[n("avatar",{attrs:{src:t.currentUser.userProfileImagePath,lazy:!0,alt:""}}),t._v(" "),n("span",{staticClass:"text-text-clickable-icon"},[t._v("\n        購入すると、コメントを読めるようになります。\n      ")])],1):n("div",{staticClass:"flex items-center gap-4 pt-2 pb-4"},[n("avatar",{attrs:{src:t.currentUser.userProfileImagePath,lazy:!0,alt:""}}),t._v(" "),t.note.commentViewable?n("span",{staticClass:"text-text-clickable-icon"},[t._v("\n        購入すると、感想をコメントで届けられます。\n      ")]):n("span",{staticClass:"text-text-clickable-icon"},[t._v("\n        購入すると、コメントを読めるようになります。\n      ")])],1)]:[n("div",{staticClass:"flex items-center gap-4 pt-2 pb-4"},[n("span",[t._v("\n        コメントするには、\n        "),n("nt-link-functional",{staticClass:"o-commentArea__alertLink",attrs:{to:t.$path.loginPath(),rel:"nofollow"}},[t._v("\n          ログイン\n        ")]),t._v("\n        または\n        "),n("nt-link-functional",{staticClass:"o-commentArea__alertLink",attrs:{to:t.$path.signupPath()},on:{click:t.signupClick}},[t._v("\n          会員登録\n        ")]),t._v("\n        をお願いします。\n      ")],1)])]],2)}),[],!1,null,"60f94f0d",null);e.a=component.exports},5023:function(t,e,n){var content=n(6391);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("49b89642",content,!0,{sourceMap:!1})},5024:function(t,e,n){var content=n(6393);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("ed58270a",content,!0,{sourceMap:!1})},5025:function(t,e,n){var content=n(6395);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("23154e80",content,!0,{sourceMap:!1})},6390:function(t,e,n){"use strict";n(5023)},6391:function(t,e,n){var o=n(15)((function(i){return i[1]}));o.push([t.i,".m-avatarWithLike[data-v-64444676]{position:relative;width:1.5625rem;height:1.375rem}.m-avatarWithLike__avatar[data-v-64444676]{position:absolute;top:.125rem;left:0}.m-avatarWithLike__likeIcon[data-v-64444676]{position:absolute;right:0;bottom:0;-webkit-text-stroke:.0625rem #fff}.m-avatarWithLike__likeIcon[data-v-64444676],.m-avatarWithLike__likeIcon[data-v-64444676]:hover{color:var(--color-text-like)}.m-avatarWithLike__likeIcon[data-v-64444676]:after{color:var(--color-text-clickable-icon)}",""]),o.locals={},t.exports=o},6392:function(t,e,n){"use strict";n(5024)},6393:function(t,e,n){var o=n(15)((function(i){return i[1]}));o.push([t.i,'.o-commentAreaCommentItem__actionIcon[data-v-5944b150]{margin-left:16px;color:var(--color-text-clickable-icon);cursor:pointer}@media only screen and (min-width:769px){.o-commentAreaCommentItem__actionIcon[data-v-5944b150]{transition:all .2s cubic-bezier(1,0,0,1)}.o-commentAreaCommentItem__actionIcon[data-v-5944b150]:hover{color:var(--color-text-secondary)}}.o-commentAreaCommentItem__actionIcon.is-disabled[data-v-5944b150]{pointer-events:none;cursor:auto;opacity:.5}.o-commentAreaCommentItem__input[data-v-5944b150]{position:relative;box-sizing:border-box;padding-left:48px;transition:padding-bottom .15s ease-in-out}@media only screen and (max-width:480px){.o-commentAreaCommentItem__input[data-v-5944b150]{padding-left:48px}}.o-commentAreaCommentItem__input.is-active[data-v-5944b150]{padding-bottom:48px}@media only screen and (max-width:480px){.o-commentAreaCommentItem__input.is-active[data-v-5944b150]{padding-bottom:40px}}.o-commentAreaCommentItem__inputMessage[data-v-5944b150]{height:32px;min-height:32px;margin-top:8px;font-family:PrimaryEmojiFont,"Helvetica Neue","Hiragino Kaku Gothic ProN","Hiragino Sans","Apple Color Emoji","noto color emoji",Arial,"Segoe UI Emoji","Segoe UI Symbol",Meiryo,sans-serif;font-size:var(--font-size-sm);resize:none}.o-commentAreaCommentItem__inputAction[data-v-5944b150]{display:flex;margin-top:8px}.o-commentAreaCommentItem__inputAction.is-active[data-v-5944b150]{pointer-events:auto;opacity:1;transition:opacity .15s ease-in-out}.o-commentAreaCommentItem__inputAction--edit[data-v-5944b150]{position:static;bottom:auto;left:auto;pointer-events:auto;opacity:1}.o-commentAreaCommentItem__inputButton[data-v-5944b150]{width:100px}.o-commentAreaCommentItem__inputButton+.o-commentAreaCommentItem__inputButton[data-v-5944b150]{margin-left:8px}.o-commentAreaCommentItem__inputButton.is-disabled[data-v-5944b150]{pointer-events:none}.o-commentAreaCommentItem__inputError[data-v-5944b150]{margin-top:8px;font-size:var(--font-size-sm);color:var(--color-text-danger)}.o-commentAreaCommentItem__body[data-v-5944b150]{margin-top:.25rem;margin-left:3rem}.o-commentAreaCommentItem__comment[data-v-5944b150]{overflow:hidden;line-height:1.3125rem;word-break:break-all}.o-commentAreaCommentItem__comment[data-is-folded=true][data-v-5944b150]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:4}',""]),o.locals={},t.exports=o},6394:function(t,e,n){"use strict";n(5025)},6395:function(t,e,n){var o=n(15)((function(i){return i[1]}));o.push([t.i,".o-commentArea[data-v-9a6fd9ee]{-webkit-appearance:none}@media only screen and (min-width:481px)and (max-width:768px){.o-commentArea[data-v-9a6fd9ee]{padding:0 2.5rem}}@media only screen and (max-width:480px){.o-commentArea[data-v-9a6fd9ee]{padding:0 1rem}}",""]),o.locals={},t.exports=o},6647:function(t,e,n){"use strict";n.r(e);var o=n(0),m=(n(11),n(26),n(12),n(18),n(1));var r=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},c=n(6),l=n(54),d=n(10),h=n(43),v=n(138),_=n(4444),f=(n(159),n(91),n(30),n(578)),C=n(192),k=n(34),x=m.a.extend({components:{Avatar:C.default,NtIcon:k.default},props:{src:{type:String,required:!0},userName:{type:String,default:void 0}},computed:{label(){return"".concat(this.userName,"さんがスキしました")}}}),y=(n(6390),n(7)),A=Object(y.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-avatarWithLike",attrs:{"data-tooltip":t.label}},[n("avatar",{staticClass:"m-avatarWithLike__avatar",attrs:{src:t.src,alt:t.userName,size:"smallXsmall",lazy:!0}}),t._v(" "),n("nt-icon",{staticClass:"m-avatarWithLike__likeIcon",attrs:{type:"heartFill","aria-label":t.label,size:"xsmall",clickable:!1}})],1)}),[],!1,null,"64444676",null).exports,I=n(2872),w=n(3974),M=n(2871),E=n(191),L=n(395),$=n(2980),O=n(17),N=n(106),T=m.a.extend({components:{Avatar:C.default,AvatarWithLike:A,BasicBalloonList:I.a,Like:w.default,NtBalloon:M.default,NtButton:h.a,NtIcon:k.default,NtLinkFunctional:E.default,NtTextarea:L.a,NtTime:$.a},mixins:[l.a],props:{user:{type:Object,required:!0},contentCreator:{type:Object,required:!0},comment:{type:Object,required:!0},otherList:{type:Object,required:!0}},data:()=>({isSavingComment:!1,editingCommentCache:"",commentLength:0,isBodyFolded:!1,showMoreButton:!1}),computed:{userPath(){return this.$path.contentPath({contentType:"user",content:this.comment.user})},overMaxCommentNumMessage:()=>"コメントは".concat(d.maxNoteCommentNum,"文字以内で入力してください。"),isOverMaxCommentNum(){return this.commentLength>d.maxNoteCommentNum},isDisabledSaveBtn(){return!this.$options.filters.trim(this.comment.comment)||this.isOverMaxCommentNum||this.isSavingComment},userName(){return this.comment.user.nickname||this.comment.user.urlname},commentBody(){return this.comment.comment?[N.d,N.g,N.a,N.o].reduce(((t,filter)=>filter(t)),this.comment.comment):""},optimizedUserProfileImagePath(){return new O.a(this.comment.user.userProfileImagePath).width(32).dpr(2).toString()}},watch:{comment:{deep:!0,handler:Object(f.a)(function(){var t=Object(o.a)((function*(t){this.commentLength=yield Object(O.j)(t.comment)}));return function(e){return t.apply(this,arguments)}}(),300)}},mounted(){this.mountModals("commentAcknowledgement");(()=>{this.$refs.commentBody.offsetHeight>84&&(this.isBodyFolded=!0,this.showMoreButton=!0)})()},methods:{clickEdit(){this.editingCommentCache=this.comment.comment,this.$emit("enableEdit",this.comment.id),this.$emit("closeMenu",this.comment.id),this.$nextTick((()=>this.$refs["textarea".concat(this.comment.id)].$el.focus()))},clickCancel(){this.$emit("disableEdit",this.comment.id),this.notifyComment(this.editingCommentCache)},notifyComment(t){this.$emit("notifyComment",t,this.comment.id)},readMore(){this.isBodyFolded=!1,this.showMoreButton=!1},saveComment(t){var e=this;return Object(o.a)((function*(){e.isSavingComment=!0;var n=yield e.$store.dispatch(c.NOTE_DETAIL_ACTION_TYPES.SAVE_COMMENT,{commentId:e.comment.id,acknowledgement:t});n.error&&("comment_acknowledgement"===n.error.code?e.openCommentAcknowledementModal():e.$emit("saveCommentError",n.error)),e.isSavingComment=!1}))()},submitSaveComment(){this.saveComment(!0)},openCommentAcknowledementModal(){this.pushCommentAcknowledgementModal({submitCallback:this.submitSaveComment})},handleLikeClick(){this.$emit("likeClick")}}}),j=T,B=(n(6392),Object(y.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"o-commentAreaCommentItem py-2"},[n("div",{staticClass:"flex items-center justify-between"},[n("nt-link-functional",{staticClass:"mr-4 block",attrs:{to:t.userPath}},[n("avatar",{attrs:{src:t.optimizedUserProfileImagePath,alt:t.comment.user.nickname||t.comment.user.urlname,lazy:!0}})],1),t._v(" "),n("div",{staticClass:"flex grow flex-col self-start overflow-hidden"},[n("nt-link-functional",{staticClass:"text-ellipsis overflow-hidden whitespace-nowrap font-semibold text-text-primary text-xs sm:text-sm",attrs:{to:t.userPath}},[t._v("\n        "+t._s(t.userName)+"\n      ")]),t._v(" "),n("nt-time",{staticClass:"text-text-secondary text-xs",attrs:{datetime:t.comment.createdAt,format:"YYYY年M月D日 HH:mm"}})],1),t._v(" "),t.isLoggedIn?n("div",{staticClass:"ml-auto flex gap-4 items-center"},[n("div",{staticClass:"o-commentAreaCommentItem__actionIcon"},[n("nt-icon",{attrs:{type:"more"},nativeOn:{click:function(e){return t.$emit("toggleMenu",t.comment.id)}}}),t._v(" "),t.otherList[t.comment.id]?n("nt-balloon",{attrs:{arrow:"bottomRight"},on:{"click-outside":function(e){return t.$emit("closeMenu",t.comment.id)}}},[n("basic-balloon-list",{scopedSlots:t._u([{key:"default",fn:function(e){return[t.currentUser.id===t.comment.user.id?n("li",{class:e.itemClass},[n("button",{class:e.itemButtonClass,attrs:{type:"button"},on:{click:function(e){return t.clickEdit()}}},[t._v("\n                  編集\n                ")])]):t._e(),t._v(" "),t.currentUser.id!==t.comment.user.id?n("li",{class:e.itemClass},[n("button",{class:e.itemButtonClass,attrs:{type:"button"},on:{click:function(e){t.$emit("openViolationModal",t.comment),t.$emit("closeMenu",t.comment.id)}}},[t._v("\n                  報告する\n                ")])]):t._e(),t._v(" "),t.currentUser.id===t.user.id||t.currentUser.id===t.comment.user.id?n("li",{class:e.itemDeleteClass},[n("button",{class:e.itemButtonClass,on:{click:function(e){t.$emit("openDeleteConfirm",t.comment),t.$emit("closeMenu",t.comment.id)}}},[t._v("\n                  削除\n                ")])]):t._e()]}}],null,!1,228991631)})],1):t._e()],1),t._v(" "),t.comment.hasContentCreatorLiked?n("avatar-with-like",{attrs:{src:t.contentCreator.userProfileImagePath,"user-name":t.contentCreator.nickname||t.contentCreator.urlname}}):t._e(),t._v(" "),n("like",{attrs:{likable:t.comment,"likable-type":"comment","like-style":"light","like-thanks-tail-position":"bottomRight","fixed-size-regardless-of-count":""},on:{likeClick:t.handleLikeClick}})],1):t._e()],1),t._v(" "),!1===Boolean(t.comment.editing)?n("div",{staticClass:"o-commentAreaCommentItem__body"},[n("p",{ref:"commentBody",staticClass:"o-commentAreaCommentItem__comment text-sm",attrs:{"data-is-folded":t.isBodyFolded},domProps:{innerHTML:t._s(t.commentBody)}}),t._v(" "),t.showMoreButton?n("button",{staticClass:"text-sm underline text-text-primary self-end",on:{click:t.readMore}},[t._v("\n      もっとみる\n    ")]):t._e()]):t._e(),t._v(" "),!0===t.comment.editing?n("div",{staticClass:"o-commentAreaCommentItem__input"},[n("nt-textarea",{ref:"textarea"+t.comment.id,staticClass:"o-commentAreaCommentItem__inputMessage",attrs:{value:t.comment.comment,"auto-height":!0,placeholder:"コメントする"},on:{input:function(e){return t.notifyComment(e)}}}),t._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:t.isOverMaxCommentNum,expression:"isOverMaxCommentNum"}],staticClass:"o-commentAreaCommentItem__inputError",attrs:{"aria-live":"assertive"}},[t._v("\n      "+t._s(t.overMaxCommentNumMessage)+"\n    ")]),t._v(" "),n("div",{staticClass:"o-commentAreaCommentItem__inputAction o-commentAreaCommentItem__inputAction--edit"},[n("div",{staticClass:"o-commentAreaCommentItem__inputButton"},[n("nt-button",{attrs:{disabled:t.isDisabledSaveBtn,type:"primary",size:"small",width:"fit"},on:{click:function(e){return t.saveComment()}}},[t._v("\n          保存\n        ")])],1),t._v(" "),n("div",{staticClass:"o-commentAreaCommentItem__inputButton"},[n("nt-button",{attrs:{type:"basic",size:"small",width:"fit"},on:{click:function(e){return t.clickCancel()}}},[t._v("\n          キャンセル\n        ")])],1)])],1):t._e()])}),[],!1,null,"5944b150",null).exports),P=n(4015),S=n(3120),D=n(88),z=m.a.extend({components:{NtButton:h.a,NtLoadingDots:v.a,CommentAreaAlert:_.a,CommentAreaCommentItem:B,CommentAreaCreateComment:()=>n.e(579).then(n.bind(null,6982))},mixins:[l.a],inject:["getNavbarHeight"],props:{note:{type:Object,required:!0},eventBus:{type:Object,required:!0}},data(){var t={};return this.note.comments.forEach((e=>{t[e.id]=!1})),{deletionComment:null,violationComment:null,otherList:t,isEditing:!1,isCommentFetching:!1}},computed:{formattedCommentCount(){return Object(D.number)(this.note.commentCount)},isLoading(){var{note:t}=this;return t.commentViewable&&t.commentCount>0&&0===t.comments.length},headerTitle(){return this.note.price>0||this.note.magazinesForBuy.length>0||this.note.limitedNoteIncludeMagazines.length>0||this.note.magazinesForSubscribe.length>0||this.note.paywall.context.isMembershipConnected?"購入者のコメント":"コメント"}},mounted(){var t=this;return Object(o.a)((function*(){var e;t.mountModals("deleteConfirm","pickUrlname","violation"),yield t.$nextTick();var{createComment:n}=t.$refs;if(null==n?void 0:n.$refs.webviewButton){var o=null===(e=t.$refs.commentHeader)||void 0===e?void 0:e.$el;o&&o.style.setProperty("display","none")}t.eventBus.on("scrollToComment",t.scrollToCommentArea),t.eventBus.on("focusAndStartInput",t.focusAndStartInput)}))()},beforeDestroy(){this.eventBus.offAll()},methods:{fetchComments(){var t=this;return Object(o.a)((function*(){t.isCommentFetching||(t.$tracker.trackActionLogs([t.$tracker.buildActionLogRecordV2(Object(P.b)({section:"note-detail-comment",target:"more-button",event:"click",contents:{note_id:t.$store.state.pages.noteDetail.data.id,note_key:t.$store.state.pages.noteDetail.data.key,is_thread_enabled:!1,experiment_info:Object.assign({},Object(S.a)(t))}}))]),t.isCommentFetching=!0,yield t.$store.dispatch(c.NOTE_DETAIL_ACTION_TYPES.FETCH_COMMENTS,{order:"newest"}),t.note.comments.forEach((e=>{t.otherList[e.id]||t.$set(t.otherList,e.id,!1)})),t.isCommentFetching=!1)}))()},afterCreateNewComment(t){var e=this;return Object(o.a)((function*(){var n,{commentId:o}=t,m=r(e.note.comments);null!=m&&(e.$set(e.otherList,m.id,!1),yield e.$nextTick(),null===(n=e.$el.querySelector('div[data-comment-id="'.concat(o,'"]')))||void 0===n||n.focus())}))()},enableEdit(t){this.isEditing=!0,this.$store.dispatch(c.NOTE_DETAIL_ACTION_TYPES.ENABLE_EDIT_COMMENT,t)},disableEdit(t){this.isEditing=!1,this.$store.dispatch(c.NOTE_DETAIL_ACTION_TYPES.DISABLE_EDIT_COMMENT,t)},notifyComment(t,e){this.$store.dispatch(c.NOTE_DETAIL_ACTION_TYPES.UPDATE_COMMENT_TEXT,{commentId:e,commentText:t})},openDeleteConfirm(t){this.pushDeleteConfirmModal({object:t,type:"comment",name:"コメント"})},openPickUrlnameModal(){this.pushPickUrlnameModal({via:"note"})},openViolationModal(t){this.violationComment=t,this.pushViolationModal({comment:t,context:"note_detail"})},saveCommentError(t){var e="コメントに失敗しました。";switch(t.code){case"not_found":e="コメントに失敗しました。記事が削除されています。";break;case"temporary_limited":e="一時的にコメントが投稿できなくなっています。";break;case"action_limited":case"invalid":e=t.message;break;case"format":"comment_too_long"===t.message&&(e="コメントは".concat(d.maxNoteCommentNum,"文字以内で入力してください。"))}alert(e)},handleToggleMenu(t){this.otherList=Object.assign(Object.assign({},this.otherList),{[t]:!this.otherList[t]})},handleCloseMenu(t){this.otherList=Object.assign(Object.assign({},this.otherList),{[t]:!1})},scrollToCommentArea(){var t=this;return Object(o.a)((function*(){if(t.$refs.commentArea){var e=yield t.getNavbarHeight();window.scrollTo(0,t.$refs.commentArea.offsetTop-e)}}))()},focusAndStartInput(){var t,e,n;null===(n=null===(e=null===(t=this.$refs)||void 0===t?void 0:t.createComment)||void 0===e?void 0:e.focusAndStartInput)||void 0===n||n.call(e)},trackCommentFormFocus(){this.$tracker.trackActionLogs([this.$tracker.buildActionLogRecordV2(Object(P.b)({section:"note-detail-comment",target:"input-form",event:"focus",contents:{note_id:this.$store.state.pages.noteDetail.data.id,note_key:this.$store.state.pages.noteDetail.data.key,is_thread_enabled:!1,experiment_info:Object.assign({},Object(S.a)(this))}}))])},trackBeforeCreateComment(t){var{commentLength:e}=t;this.$tracker.trackActionLogs([this.$tracker.buildActionLogRecordV2(Object(P.b)({section:"note-detail-comment",target:"submit-button",event:"click",contents:{note_id:this.$store.state.pages.noteDetail.data.id,note_key:this.$store.state.pages.noteDetail.data.key,is_thread_enabled:!1,comment_length:e,experiment_info:Object.assign({},Object(S.a)(this))}}))])},trackCommentImpTrackParams(t){var{commentId:e}=t;return Object(P.b)({section:"note-detail-comment",target:"list-item",event:"imp",contents:{note_id:this.$store.state.pages.noteDetail.data.id,note_key:this.$store.state.pages.noteDetail.data.key,is_thread_enabled:!1,comment_id:e,experiment_info:Object.assign({},Object(S.a)(this))}})},trackCommentAreaAlertSignupClick(){this.$tracker.trackActionLogs([this.$tracker.buildActionLogRecordV2({kind:"comment-signup-click",section:"note-detail-comment",target:"sign-up-click",event:"click",contents:{}})])},trackLikeClick(t){var{commentId:e}=t;this.$tracker.trackActionLogs([this.$tracker.buildActionLogRecordV2(Object(P.b)({section:"note-detail-comment",target:"like-button",event:"click",contents:{note_id:this.$store.state.pages.noteDetail.data.id,note_key:this.$store.state.pages.noteDetail.data.key,is_thread_enabled:!1,comment_id:e,experiment_info:Object.assign({},Object(S.a)(this))}}))])}}}),U=(n(6394),Object(y.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"commentArea",staticClass:"o-commentArea"},[n("div",{staticClass:"flex justify-between items-center"},[n("h2",{staticClass:"font-bold text-sm text-text-primary"},[t._v("\n      "+t._s(t.headerTitle)+"\n    ")]),t._v(" "),t.note.commentCount>0?n("span",{staticClass:"text-sm text-text-secondary ml-1 mr-auto"},[t._v("\n      "+t._s(t.formattedCommentCount)+"\n    ")]):t._e()]),t._v(" "),t.note.commentViewable&&t.note.comments.length<t.note.commentCount?n("div",{directives:[{name:"hide-on-webview",rawName:"v-hide-on-webview"}],staticClass:"my-4 text-center"},[n("nt-button",{attrs:{disabled:t.isCommentFetching,type:"basic",size:"small"},on:{click:t.fetchComments}},[t._v("\n      前のコメントを表示\n    ")])],1):t._e(),t._v(" "),t.isLoading?n("nt-loading-dots",{staticClass:"my-8"}):t._e(),t._v(" "),t.note.comments.length>0?n("div",{staticClass:"border-b border-border-default pb-4 mb-2"},t._l(t.note.comments,(function(e){return n("div",{key:e.id,staticClass:"o-commentArea__item o-commentArea__item--edit",attrs:{"data-comment-id":e.id,tabindex:"-1"}},[n("comment-area-comment-item",{directives:[{name:"imp-track",rawName:"v-imp-track",value:t.trackCommentImpTrackParams({commentId:e.id}),expression:"trackCommentImpTrackParams({ commentId: comment.id })"}],attrs:{user:t.note.user,comment:e,"content-creator":t.note.user,"other-list":t.otherList},on:{toggleMenu:t.handleToggleMenu,closeMenu:t.handleCloseMenu,openDeleteConfirm:function(e){return t.openDeleteConfirm(e)},openViolationModal:function(e){return t.openViolationModal(e)},enableEdit:function(e){return t.enableEdit(e)},disableEdit:function(e){return t.disableEdit(e)},notifyComment:function(e,n){return t.notifyComment(e,n)},saveCommentError:function(e){return t.saveCommentError(e)},likeClick:function(n){return t.trackLikeClick({commentId:e.id})}}})],1)})),0):t._e(),t._v(" "),t.isLoggedIn?n("comment-area-create-comment",{ref:"createComment",attrs:{note:t.note,placeholder:"コメントする⋯","no-border":""},on:{afterCreateNewComment:t.afterCreateNewComment,saveCommentError:t.saveCommentError,"before-create-new-comment":t.trackBeforeCreateComment,"focus-comment-form":t.trackCommentFormFocus}}):t._e(),t._v(" "),n("comment-area-alert",{attrs:{"is-editing":t.isEditing,note:t.note},on:{openPickUrlnameModal:t.openPickUrlnameModal,signupClick:t.trackCommentAreaAlertSignupClick}})],1)}),[],!1,null,"9a6fd9ee",null));e.default=U.exports}}]);