(window.webpackJsonp=window.webpackJsonp||[]).push([[382],{2980:function(e,t,r){"use strict";var n=r(1),o=r(2977),l=n.a.extend({props:{datetime:{type:String,required:!0},format:{type:String,default:"YYYY年M月D日 HH:mm",required:!1}},computed:{displayTime(){return Object(o.b)(this.datetime,this.format)}}}),c=r(7),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("time",{attrs:{datetime:e.datetime}},[e._t("default"),e._v(e._s(e.displayTime))],2)}),[],!1,null,null,null);t.a=component.exports},3490:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n="https://play.google.com/store/apps/details?id=mu.note&hl=ja"},3543:function(e,t,r){var content=r(3778);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("102c2faa",content,!0,{sourceMap:!1})},3768:function(e,t,r){var content=r(4111);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("43d77c81",content,!0,{sourceMap:!1})},3769:function(e,t,r){var content=r(4113);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("77a22a78",content,!0,{sourceMap:!1})},3775:function(e,t,r){var content=r(4119);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("4b25f43a",content,!0,{sourceMap:!1})},3776:function(e,t,r){var content=r(4121);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("44656a39",content,!0,{sourceMap:!1})},3777:function(e,t,r){"use strict";r(3543)},3778:function(e,t,r){var n=r(15)((function(i){return i[1]}));n.push([e.i,".m-membershipBenefitList__benefitText[data-v-3c050a72]{margin-top:.125rem;font-size:var(--font-size-xs);color:var(--color-text-secondary)}",""]),n.locals={},e.exports=n},3783:function(e,t,r){var content=r(4130);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("372de242",content,!0,{sourceMap:!1})},3786:function(e,t,r){var content=r(4134);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("8b88da34",content,!0,{sourceMap:!1})},3787:function(e,t,r){var content=r(4137);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("4b3ed407",content,!0,{sourceMap:!1})},3793:function(e,t,r){var content=r(4151);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("05561846",content,!0,{sourceMap:!1})},3794:function(e,t,r){var content=r(4153);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("791a609c",content,!0,{sourceMap:!1})},3983:function(e,t,r){"use strict";r(11),r(12);var n=r(1),o=r(248),l=r(379),c=n.a.extend({components:{NtSvgIcon:o.default},props:{plan:{type:Object,default:void 0}},computed:{visibleBoardBenefit(){return!1===Object(l.a)(this.plan.circle)},hasBenefitMagazines(){return this.plan.membershipMagazines&&this.plan.membershipMagazines.length>0},benefitMagazineTexts(){var e=[];if(!this.hasBenefitMagazines)return e;for(var t of this.plan.membershipMagazines)e.push(t.name);return e}}}),d=(r(3777),r(7)),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{staticClass:"m-membershipBenefitList flex flex-col justify-start gap-[0.5625rem]"},[e._l(e.plan.benefitAppealTexts,(function(text,i){return r("li",{key:i,staticClass:"flex items-start gap-2"},[r("nt-svg-icon",{staticClass:"text-text-primary",attrs:{"aria-hidden":"true",type:"gift",size:"mediumSmall"}}),e._v(" "),r("span",{staticClass:"m-membershipBenefitList__benefitText"},[e._v("\n      "+e._s(text)+"\n    ")])],1)})),e._v(" "),e._l(e.benefitMagazineTexts,(function(text,i){return r("li",{key:e.plan.key+"-benefit-"+i,staticClass:"flex items-start gap-2"},[r("nt-svg-icon",{staticClass:"text-text-primary",attrs:{"aria-hidden":"true",type:"magazine",size:"mediumSmall"}}),e._v(" "),r("span",{staticClass:"m-membershipBenefitList__benefitText"},[e._v("\n      "+e._s(text)+"\n    ")])],1)})),e._v(" "),e.plan.membershipNotesEnabled?r("li",{staticClass:"flex items-start gap-2"},[r("nt-svg-icon",{staticClass:"text-text-primary",attrs:{"aria-hidden":"true",type:"note",size:"mediumSmall"}}),e._v(" "),r("span",{staticClass:"m-membershipBenefitList__benefitText"},[e._v("メンバー限定の記事")])],1):e._e(),e._v(" "),e.visibleBoardBenefit?r("li",{staticClass:"flex items-start gap-2"},[r("nt-svg-icon",{staticClass:"text-text-primary",attrs:{"aria-hidden":"true",type:"circle",size:"mediumSmall"}}),e._v(" "),r("span",{staticClass:"m-membershipBenefitList__benefitText"},[e._v("メンバー限定の掲示板")])],1):e._e(),e._v(" "),e.plan.membershipMagazinesEnabled?r("li",{staticClass:"flex items-start gap-2"},[r("nt-svg-icon",{staticClass:"text-text-primary",attrs:{"aria-hidden":"true",type:"magazine",size:"mediumSmall"}}),e._v(" "),r("span",{staticClass:"m-membershipBenefitList__benefitText"},[e._v("メンバー特典マガジン")])],1):e._e(),e._v(" "),r("li",{staticClass:"flex items-start gap-2"},[r("nt-svg-icon",{staticClass:"text-text-primary",attrs:{"aria-hidden":"true",type:"memberscard",size:"mediumSmall"}}),e._v(" "),r("span",{staticClass:"m-membershipBenefitList__benefitText"},[e._v("メンバー限定の会員証")])],1),e._v(" "),0!==e.plan.price?r("li",{staticClass:"flex items-start gap-2"},[r("nt-svg-icon",{staticClass:"text-text-primary",attrs:{"aria-hidden":"true",type:"badge",size:"mediumSmall"}}),e._v(" "),r("span",{staticClass:"m-membershipBenefitList__benefitText"},[e._v("活動期間に応じたバッジ")])],1):e._e()],2)}),[],!1,null,"3c050a72",null);t.a=component.exports},4048:function(e,t,r){"use strict";r.r(t);var n=r(1),o=r(3460),l=r(3143),c=r(34),d=n.a.extend({components:{PaypayHelpBalloon:o.a,NtIcon:c.default},props:{arrow:{type:String,default:"bottomRight"},containerBgClassName:{type:String,default:""}},data:()=>({isBalloonOpen:!1}),computed:{balloonText:()=>l.a}}),h=r(7),component=Object(h.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"py-2 flex justify-center items-center text-xs",class:""===e.containerBgClassName?"bg-surface-quaternary":e.containerBgClassName},[e._v("\n  PayPay決済で"),r("span",{staticClass:"text-text-offer"},[e._v("追加チャンス！")]),e._v("12/28まで\n  "),r("div",{staticClass:"relative inline-flex items-center"},[r("nt-icon",{staticClass:"ml-2 text-text-clickable-icon",attrs:{type:"help",size:"small",clickable:!0},nativeOn:{click:function(t){e.isBalloonOpen=!0}}}),e._v(" "),r("div",{staticClass:"absolute right-0 -bottom-2"},[e.isBalloonOpen?r("paypay-help-balloon",{attrs:{"paypay-campaign-help-balloon-text":e.balloonText,arrow:e.arrow},on:{close:function(t){e.isBalloonOpen=!1}}}):e._e()],1)],1)])}),[],!1,null,null,null);t.default=component.exports},4110:function(e,t,r){"use strict";r(3768)},4111:function(e,t,r){var n=r(15)((function(i){return i[1]}));n.push([e.i,".m-basicModalContent[data-v-eb4f0d52]{position:relative;margin:56px auto;background:var(--color-surface-normal);border-radius:8px}@media only screen and (max-width:480px){.m-basicModalContent[data-v-eb4f0d52]{margin:8px auto 80px}}.m-basicModalContent__header[data-v-eb4f0d52]:not(:empty){padding:16px;font-size:var(--font-size-base);color:var(--color-text-primary);text-align:center;border-bottom:1px solid var(--color-border-default)}@media only screen and (max-width:480px){.m-basicModalContent__body[data-v-eb4f0d52]{width:100%}}.m-basicModalContent__body--height[data-v-eb4f0d52]{max-height:440px}@media only screen and (max-width:480px){.m-basicModalContent__body--height[data-v-eb4f0d52]{height:calc(100vh - 240px)}}.m-basicModalContent__body--scrollable[data-v-eb4f0d52]{max-height:440px;overflow-y:auto}@media only screen and (max-width:480px){.m-basicModalContent__body--scrollable[data-v-eb4f0d52]{max-height:calc(100vh - 240px)}}.m-basicModalContent__footer[data-v-eb4f0d52]{display:flex;align-items:center;justify-content:center;padding:16px;background-color:var(--color-background-secondary);border-top:1px solid var(--color-border-default);border-radius:0 0 .5rem .5rem}.m-basicModalContent--size_small[data-v-eb4f0d52]{width:470px}@media only screen and (max-width:480px){.m-basicModalContent--size_small[data-v-eb4f0d52]{width:calc(100% - 16px)}}.m-basicModalContent--size_medium[data-v-eb4f0d52]{width:580px}@media only screen and (max-width:480px){.m-basicModalContent--size_medium[data-v-eb4f0d52]{width:calc(100% - 16px)}}.m-basicModalContent--size_large[data-v-eb4f0d52]{width:100%}@media only screen and (max-width:480px){.m-basicModalContent--size_large[data-v-eb4f0d52]{width:calc(100% - 16px)}}",""]),n.locals={},e.exports=n},4112:function(e,t,r){"use strict";r(3769)},4113:function(e,t,r){var n=r(15)((function(i){return i[1]}));n.push([e.i,'.o-afterPurchaseMessageModal__item[data-v-eb4f0d52]{position:relative}.o-afterPurchaseMessageModal__bg[data-v-eb4f0d52]{position:absolute;top:0;left:0;pointer-events:none}.o-afterPurchaseMessageModal__bgImage[data-v-eb4f0d52]{width:auto;max-width:100%}.o-afterPurchaseMessageModal__default[data-v-eb4f0d52]{width:104px;border-radius:50%}.o-afterPurchaseMessageModal__avatar[data-v-eb4f0d52]{position:relative;z-index:2;display:flex;align-items:center;justify-content:center;padding:48px 0}@media only screen and (max-width:480px){.o-afterPurchaseMessageModal__avatar[data-v-eb4f0d52]{padding:32px 0}}.o-afterPurchaseMessageModal__message[data-v-eb4f0d52]{position:relative;z-index:2;padding:24px;margin:0 40px 40px;font-size:var(--font-size-base);text-align:left;white-space:pre-line;background-color:var(--color-surface-normal);border:1px solid var(--color-border-default);border-radius:8px}.o-afterPurchaseMessageModal__message[data-v-eb4f0d52]:before{position:absolute;top:-12px;left:50%;display:block;width:9px;height:9px;margin-left:-6px;content:"";background-color:var(--color-surface-normal);border-right:1px solid var(--color-border-default);border-bottom:1px solid var(--color-border-default);transform:rotate(225deg) translate(-5px,-5px)}.o-afterPurchaseMessageModal__support[data-v-eb4f0d52]{margin:0 40px 40px}.o-afterPurchaseMessageModal__formAction[data-v-eb4f0d52]{padding:0 0 40px;text-align:center}.o-afterPurchaseMessageModal__shareButtons[data-v-eb4f0d52]{padding:14px 24px 24px}@media only screen and (max-width:480px){.o-afterPurchaseMessageModal__shareButtons[data-v-eb4f0d52]{padding:16px 24px 24px}}.o-afterPurchaseMessageModal__actionMessage[data-v-eb4f0d52]{width:100%;margin-bottom:8px;font-size:var(--font-size-sm);text-align:center}',""]),n.locals={},e.exports=n},4118:function(e,t,r){"use strict";r(3775)},4119:function(e,t,r){var n=r(15)((function(i){return i[1]}));n.push([e.i,".m-basicModalContent[data-v-2ff05555]{position:relative;margin:56px auto;background:var(--color-surface-normal);border-radius:8px}@media only screen and (max-width:480px){.m-basicModalContent[data-v-2ff05555]{margin:8px auto 80px}}.m-basicModalContent__header[data-v-2ff05555]:not(:empty){padding:16px;font-size:var(--font-size-base);color:var(--color-text-primary);text-align:center;border-bottom:1px solid var(--color-border-default)}@media only screen and (max-width:480px){.m-basicModalContent__body[data-v-2ff05555]{width:100%}}.m-basicModalContent__body--height[data-v-2ff05555]{max-height:440px}@media only screen and (max-width:480px){.m-basicModalContent__body--height[data-v-2ff05555]{height:calc(100vh - 240px)}}.m-basicModalContent__body--scrollable[data-v-2ff05555]{max-height:440px;overflow-y:auto}@media only screen and (max-width:480px){.m-basicModalContent__body--scrollable[data-v-2ff05555]{max-height:calc(100vh - 240px)}}.m-basicModalContent__footer[data-v-2ff05555]{display:flex;align-items:center;justify-content:center;padding:16px;background-color:var(--color-background-secondary);border-top:1px solid var(--color-border-default);border-radius:0 0 .5rem .5rem}.m-basicModalContent--size_small[data-v-2ff05555]{width:470px}@media only screen and (max-width:480px){.m-basicModalContent--size_small[data-v-2ff05555]{width:calc(100% - 16px)}}.m-basicModalContent--size_medium[data-v-2ff05555]{width:580px}@media only screen and (max-width:480px){.m-basicModalContent--size_medium[data-v-2ff05555]{width:calc(100% - 16px)}}.m-basicModalContent--size_large[data-v-2ff05555]{width:100%}@media only screen and (max-width:480px){.m-basicModalContent--size_large[data-v-2ff05555]{width:calc(100% - 16px)}}",""]),n.locals={},e.exports=n},4120:function(e,t,r){"use strict";r(3776)},4121:function(e,t,r){var n=r(15)((function(i){return i[1]}));n.push([e.i,".m-purchaseSubscribeMagazine__item[data-v-2ff05555]{margin:16px}.m-purchaseSubscribeMagazine__item--strong[data-v-2ff05555]{padding:24px 48px;background-color:var(--color-background-secondary);border:1px solid var(--color-border-default);border-radius:8px}@media only screen and (max-width:480px){.m-purchaseSubscribeMagazine__item--strong[data-v-2ff05555]{padding:16px}}.m-purchaseSubscribeMagazine__attentionIcon[data-v-2ff05555]{flex:0 0 auto;margin-right:8px;line-height:1.5;color:var(--color-text-primary)}.m-purchaseSubscribeMagazine__cautionIcon[data-v-2ff05555]{flex:0 0 auto;margin-right:8px;line-height:1.5;color:var(--color-text-caution)}.m-purchaseSubscribeMagazine__attentionText[data-v-2ff05555]{width:100%;font-size:var(--font-size-xs);line-height:1.5;color:var(--color-text-secondary)}",""]),n.locals={},e.exports=n},4129:function(e,t,r){"use strict";r(3783)},4130:function(e,t,r){var n=r(15)((function(i){return i[1]}));n.push([e.i,".m-purchaseCoverForMembership__benefitText[data-v-68c6fb6c]{margin-top:.125rem;font-size:var(--font-size-xs);color:var(--color-text-secondary)}",""]),n.locals={},e.exports=n},4133:function(e,t,r){"use strict";r(3786)},4134:function(e,t,r){var n=r(15)((function(i){return i[1]}));n.push([e.i,".m-purchaseConfirmLink[data-v-34437e0c]{padding-right:16px;padding-bottom:8px;text-align:right}.m-purchaseConfirmLink__target[data-v-34437e0c]{display:inline-block;font-size:var(--font-size-xs);color:var(--color-text-secondary);text-decoration:underline}@media only screen and (min-width:769px){.m-purchaseConfirmLink__target[data-v-34437e0c]{transition:all .2s cubic-bezier(1,0,0,1)}.m-purchaseConfirmLink__target[data-v-34437e0c]:hover{color:var(--color-text-primary)}}",""]),n.locals={},e.exports=n},4135:function(e,t,r){var map={"./bg_support_01.png":631,"./bg_support_02.png":632,"./bg_support_03.png":633,"./bg_support_04.png":634};function n(e){var t=o(e);return r(t)}function o(e){if(!r.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}n.keys=function(){return Object.keys(map)},n.resolve=o,e.exports=n,n.id=4135},4136:function(e,t,r){"use strict";r(3787)},4137:function(e,t,r){var n=r(15)((function(i){return i[1]}));n.push([e.i,'.m-purchaseSupport[data-v-24543211]{max-width:470px;margin:0 auto}.m-purchaseSupport__inner[data-v-24543211]{margin:24px 16px}.m-purchaseSupport__cover[data-v-24543211]{padding:24px 48px;background-position:50%;background-size:cover}.m-purchaseSupport__balloon[data-v-24543211]{position:relative;width:100%;padding:8px 16px;margin-bottom:16px;background-color:var(--color-surface-normal);border-radius:8px}.m-purchaseSupport__balloon[data-v-24543211]:before{position:absolute;bottom:-6px;left:50%;width:12px;height:12px;content:"";background-color:inherit;transform:translate(-50%) rotate(45deg)}.m-purchaseSupport__balloonInner[data-v-24543211]{display:-webkit-box;overflow:hidden;font-size:var(--font-size-xs);line-height:1.5;-webkit-box-orient:vertical;-webkit-line-clamp:4}.m-purchaseSupport__title[data-v-24543211]{font-size:var(--font-size-xs);font-weight:600;text-align:center}.m-purchaseSupport__link[data-v-24543211]{display:block;font-size:var(--font-size-xs);color:var(--color-text-secondary);text-align:center;text-decoration:underline}@media only screen and (min-width:769px){.m-purchaseSupport__link[data-v-24543211]:hover{color:var(--color-text-primary)}}.m-purchaseSupport__avatar[data-v-24543211]{display:flex;justify-content:center;margin-bottom:16px}.m-purchaseSupport__item[data-v-24543211]{position:relative}.m-purchaseSupport__item+.m-purchaseSupport__item[data-v-24543211]{margin-top:24px}.m-purchaseSupport__help[data-v-24543211]{position:absolute;top:0;right:0;display:flex;align-items:center;line-height:1.5;color:var(--color-text-secondary)}.m-purchaseSupport__helpText[data-v-24543211]{margin-right:4px;font-size:var(--font-size-xs)}.m-purchaseSupport__footer[data-v-24543211]{display:flex;flex-direction:column;padding:1rem 0}@media only screen and (max-width:480px){.m-purchaseSupport__footer[data-v-24543211]{padding:1rem}}',""]),n.locals={},e.exports=n},4150:function(e,t,r){"use strict";r(3793)},4151:function(e,t,r){var n=r(15)((function(i){return i[1]}));n.push([e.i,".m-basicModalContent[data-v-fddade08]{position:relative;margin:56px auto;background:var(--color-surface-normal);border-radius:8px}@media only screen and (max-width:480px){.m-basicModalContent[data-v-fddade08]{margin:8px auto 80px}}.m-basicModalContent__header[data-v-fddade08]:not(:empty){padding:16px;font-size:var(--font-size-base);color:var(--color-text-primary);text-align:center;border-bottom:1px solid var(--color-border-default)}@media only screen and (max-width:480px){.m-basicModalContent__body[data-v-fddade08]{width:100%}}.m-basicModalContent__body--height[data-v-fddade08]{max-height:440px}@media only screen and (max-width:480px){.m-basicModalContent__body--height[data-v-fddade08]{height:calc(100vh - 240px)}}.m-basicModalContent__body--scrollable[data-v-fddade08]{max-height:440px;overflow-y:auto}@media only screen and (max-width:480px){.m-basicModalContent__body--scrollable[data-v-fddade08]{max-height:calc(100vh - 240px)}}.m-basicModalContent__footer[data-v-fddade08]{display:flex;align-items:center;justify-content:center;padding:16px;background-color:var(--color-background-secondary);border-top:1px solid var(--color-border-default);border-radius:0 0 .5rem .5rem}.m-basicModalContent--size_small[data-v-fddade08]{width:470px}@media only screen and (max-width:480px){.m-basicModalContent--size_small[data-v-fddade08]{width:calc(100% - 16px)}}.m-basicModalContent--size_medium[data-v-fddade08]{width:580px}@media only screen and (max-width:480px){.m-basicModalContent--size_medium[data-v-fddade08]{width:calc(100% - 16px)}}.m-basicModalContent--size_large[data-v-fddade08]{width:100%}@media only screen and (max-width:480px){.m-basicModalContent--size_large[data-v-fddade08]{width:calc(100% - 16px)}}",""]),n.locals={},e.exports=n},4152:function(e,t,r){"use strict";r(3794)},4153:function(e,t,r){var n=r(15)((function(i){return i[1]}));n.push([e.i,".m-purchaseNoteGuestComplete[data-v-fddade08]{margin:24px 8px 0}.m-purchaseNoteGuestComplete__thanksIcon[data-v-fddade08]{display:flex;flex:auto;flex-direction:row;flex-grow:0;align-items:center;justify-content:center;order:0;float:left;width:56px;height:56px;background:#fff;gap:10px}.m-purchaseNoteGuestComplete__header[data-v-fddade08]{gap:4px}.m-purchaseNoteGuestComplete__header h1[data-v-fddade08]{font-size:var(--font-size-xl);font-weight:600;line-height:30px;text-align:center;letter-spacing:0}.m-purchaseNoteGuestComplete__headerIcon[data-v-fddade08]{display:flex;flex-direction:row;justify-content:center;margin-bottom:8px}.m-purchaseNoteGuestComplete__thanks[data-v-fddade08]{margin-top:20px}.m-purchaseNoteGuestComplete__thanksHeader[data-v-fddade08]{font-size:var(--font-size-sm)}.m-purchaseNoteGuestComplete__thanksCaution[data-v-fddade08]{padding:12px;margin:24px 0 32px;background-color:var(--color-background-secondary);border:1px solid var(--color-border-default);border-radius:8px}.m-purchaseNoteGuestComplete__thanksCautionLink[data-v-fddade08]{text-decoration:none;border-bottom:1px solid var(--color-border-primary)}.m-purchaseNoteGuestComplete__thanksCautionLink[data-v-fddade08] .a-svgIcon{position:relative;top:1px}.m-purchaseNoteGuestComplete__thanksCautionMessage[data-v-fddade08]{margin-bottom:8px;font-size:var(--font-size-xs)}.m-purchaseNoteGuestComplete__thanksCautionTitle[data-v-fddade08]{padding-bottom:8px;font-size:var(--font-size-sm);font-weight:600;line-height:21px;color:var(--color-text-primary);text-align:center}.m-purchaseNoteGuestComplete__thanksCautionTitle[data-v-fddade08] .a-icon{position:relative;top:2px;margin-right:4px}.m-purchaseNoteGuestComplete__thanksNum[data-v-fddade08]{margin-bottom:8px;font-size:var(--font-size-xs)}.m-purchaseNoteGuestComplete__thanksNum__number[data-v-fddade08]{font-weight:600}.m-purchaseNoteGuestComplete__signup[data-v-fddade08]{padding:24px 16px;border:1px solid var(--color-border-default);border-radius:8px}.m-purchaseNoteGuestComplete__signupTitle[data-v-fddade08]{margin-bottom:16px;font-weight:600;text-align:center}.m-purchaseNoteGuestComplete__signupDescription[data-v-fddade08]{margin-bottom:16px;font-size:var(--font-size-sm)}.m-purchaseNoteGuestComplete__campaignPromotionalText[data-v-fddade08]{padding:16px;margin-bottom:24px;font-size:var(--font-size-xs);font-weight:600;text-align:center;background-color:var(--color-surface-successSubdued);border:2px solid var(--color-border-weak);border-radius:8px}.m-purchaseNoteGuestComplete__signupImage[data-v-fddade08]{width:220px;margin-right:auto;margin-left:auto}.m-purchaseNoteGuestComplete__signupItem+.m-purchaseNoteGuestComplete__signupItem[data-v-fddade08]{margin-top:16px}.m-purchaseNoteGuestComplete__signupItem__description[data-v-fddade08]{margin-top:8px;font-size:var(--font-size-xs);color:var(--color-text-secondary)}.m-purchaseNoteGuestComplete__signupItem__eye[data-v-fddade08]{margin:0 9px 0 8px;color:var(--color-text-clickable-icon);outline:none}@media only screen and (min-width:769px){.m-purchaseNoteGuestComplete__signupItem__eye[data-v-fddade08]{transition:color .2s cubic-bezier(1,0,0,1)}.m-purchaseNoteGuestComplete__signupItem__eye[data-v-fddade08]:hover{color:var(--color-text-secondary)}}.m-purchaseNoteGuestComplete__signupItem[data-v-fddade08] .m-formItem__main{display:flex;background:var(--color-surface-normal);border:1px solid var(--color-border-default);border-radius:8px}.m-purchaseNoteGuestComplete__signupItem[data-v-fddade08] .m-formItem__main .a-input{border:none;border-radius:8px}.m-purchaseNoteGuestComplete__signupName[data-v-fddade08]{margin-bottom:8px;font-size:var(--font-size-sm);font-weight:600}.m-purchaseNoteGuestComplete__signupValue[data-v-fddade08]{font-size:var(--font-size-sm)}.m-purchaseNoteGuestComplete__signupLink[data-v-fddade08]{color:var(--color-text-secondary);text-decoration:underline}@media only screen and (min-width:769px){.m-purchaseNoteGuestComplete__signupLink[data-v-fddade08]{transition:all .2s cubic-bezier(1,0,0,1)}.m-purchaseNoteGuestComplete__signupLink[data-v-fddade08]:hover{color:var(--color-text-primary)}}.m-purchaseNoteGuestComplete__mailsend[data-v-fddade08]{padding:32px 40px;text-align:center}.m-purchaseNoteGuestComplete__attention[data-v-fddade08]{margin-top:8px!important;font-size:var(--font-size-xs);color:var(--color-text-secondary)}.m-purchaseNoteGuestComplete__privacyPolicyLink[data-v-fddade08],.m-purchaseNoteGuestComplete__termsLink[data-v-fddade08]{color:var(--color-text-secondary);text-decoration:underline}@media only screen and (min-width:769px){.m-purchaseNoteGuestComplete__privacyPolicyLink[data-v-fddade08],.m-purchaseNoteGuestComplete__termsLink[data-v-fddade08]{transition:all .2s cubic-bezier(1,0,0,1)}.m-purchaseNoteGuestComplete__privacyPolicyLink[data-v-fddade08]:hover,.m-purchaseNoteGuestComplete__termsLink[data-v-fddade08]:hover{color:var(--color-text-primary)}}",""]),n.locals={},e.exports=n},4399:function(e,t,r){"use strict";var n=r(0),o=(r(11),r(26),r(12),r(19),r(18),r(89),r(1)),l=r(17),c=r(10),d=r(249),h=r(193),m=r(54),v=r(57),_=r(675),f=r(3459),y=r(2870),C=r(43),x=r(34),M=r(191),w=r(2980),P=r(154),S=r(83),k=function(){var e=Object(n.a)((function*(e,option){yield e.trackActionLogs([e.buildActionLogRecord({kind:"subscribe-by-coupon",contents:{action:option.action,key:option.key}})])}));return function(t,r){return e.apply(this,arguments)}}(),T=o.a.extend({components:{NtButton:C.a,NtInput:P.a,FormErrorList:S.a},props:{magazine:{type:Object,default:()=>({})}},data:()=>({couponApplied:!1,couponCode:"",couponErrorMessage:""}),mounted(){k(this.$tracker,{action:"imp",key:this.magazine.key})},methods:{apply(){this.couponCode?(this.couponApplied=!0,this.$emit("apply",this.couponCode)):this.$emit("invalid","クーポンコードを入力してください。")}}}),A=r(7),z=Object(A.a)(T,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.couponApplied?e._e():r("div",{staticClass:"text-xs"},[e._v("\n    クーポンを使用\n  ")]),e._v(" "),r("div",{staticClass:"mt-1 flex flex-row"},[r("nt-input",{staticClass:"flex-1",attrs:{id:"couponCode",placeholder:"クーポンコードを入力",type:"text",width:"fit"},model:{value:e.couponCode,callback:function(t){e.couponCode="string"==typeof t?t.trim():t},expression:"couponCode"}}),e._v(" "),r("nt-button",{staticClass:"ml-2",attrs:{type:"secondary"},on:{click:e.apply}},[e._v("\n      適用\n    ")])],1),e._v(" "),e.couponErrorMessage?r("form-error-list",[r("div",[e._v(e._s(e.couponErrorMessage))])]):e._e()],1)}),[],!1,null,null,null).exports,N=r(194),E=r(3126),$=r(4010),O=r.n($),L=r(237),I=r.n(L),j=r(235),U=r.n(j),G=r(3537),F=r.n(G),R=r(3692),D=r.n(R),B=new Date,Y=()=>{var e=F()(B),t=D()(B)+1;return"".concat(e,"年").concat(t,"月")},H=()=>{return"".concat((t=O()(I()(B)),"".concat(Y()).concat(t,"日")),"から").concat((e=O()(U()(B)),"".concat(Y()).concat(e,"日")),"まで無料");var e,t},K=function(){var e=Object(n.a)((function*(e){return new Promise((t=>t(window.confirm(e))))}));return function(t){return e.apply(this,arguments)}}(),W=r(588),Q=r(3688),V=[{id:"creditcard",value:"クレジットカードでお支払い"},{id:"carrier",value:"スマホの料金と一緒にお支払い"}],J=o.a.extend({components:{CreditCardErrorMessage:f.a,NtCurrency:y.a,NtButton:C.a,NtIcon:x.default,NtLinkFunctional:M.default,NtTime:w.a,CouponForm:z,FormCheckbox:N.a,FormErrorList:S.a,WarningMessage:()=>r.e(131).then(r.bind(null,3295)),DrawCampaignMessage:Q.a},mixins:[m.a,h.a,d.a],props:{isModal:{type:Boolean,default:!1},placeType:{type:String,default:"purchase-subscribe-magazine-modal"}},data:()=>({apiError:null,isSubmitting:!1,couponErrorMessage:""}),computed:{isDrawActive(){return this.$store.getters[W.DRAW_GETTER_TYPES.IS_ACTIVE]},isDrawShown(){return!!this.isDrawActive&&(!this.showFirstMonthFree&&!this.isCouponApplied)},via(){return this.$store.state.modal.purchaseModalContainer.via},paymentMethod(){if(this.isCouponApplied)return"creditcard";var e=this.$store.state.modal.purchaseModalContainer.paymentMethod||this.currentUser.defaultPaymentMethod;return["creditcard","monthly_au","monthly_docomo","monthly_softbank"].includes(e)?e:null},magazine(){return this.$store.state.purchase.magazine},appliedCoupon(){return this.$store.state.coupon.appliedCoupon},isCouponApplied(){return!!this.appliedCoupon},isShowWarningMessage(){return this.showSubscribeButton&&!this.showFirstMonthFree&&!1===this.magazine.isImmediateCharge},warningMessage(){var e;return"creditcard"===this.paymentMethod?"already used"===(null===(e=this.magazine.subscriptionInfo)||void 0===e?void 0:e.option)?"すでにご利用済みのため、今回は適用されません。":"同じ定期購読マガジンでご利用済みのクレジットカードのため、初月無料の対象外です。":"初月無料は、クレジットカード決済をご利用の場合にのみ適用されます。"},showFirstMonthFree(){var e;return"creditcard"===this.paymentMethod&&"first_month_free"===(null===(e=this.magazine.subscriptionInfo)||void 0===e?void 0:e.option)},showSubscribeButton(){return!!this.paymentMethod&&!("creditcard"===this.paymentMethod&&!this.currentUser.canCheckout)},conversionKind(){return this.$store.state.purchase.conversionKind},conversionContentKey(){return this.$store.state.purchase.conversionContentKey},showWithFollow(){return void 0!==this.magazine.user.id&&(!this.magazine.user.isFollowing&&this.showSubscribeButton)},isCarrier(){return"carrier"===this.paymentMethod},authorName(){return this.magazine.user.nickname||this.magazine.user.urlname},isCouponUsable(){return this.magazine.hasCoupon&&!this.appliedCoupon&&[null,"creditcard"].includes(this.paymentMethod)},subscribableMonth:()=>Y(),freeMonthPeriod:()=>H(),couponFreePeriodMessage(){var e;return"first_month_free"===(null===(e=this.magazine.subscriptionInfo)||void 0===e?void 0:e.option)?"このマガジンの初月無料とクーポンの併用のため":"クーポン利用のため"},contentAuthor(){return this.$store.state.purchase.creator}},mounted(){Object(E.c)(this.$tracker,{kind:E.a.cv_purchasing_process,action:"imp",contentType:"Magazine",contentKey:this.magazine.key,placeType:this.placeType,purchaseType:"subscription",experiment_info:{}}),this.init()},methods:Object.assign(Object.assign(Object.assign({},m.a.methods),h.a.methods),{init(){Object.assign(this.$data,{apiError:null,isSubmitting:!1,couponErrorMessage:""}),"true"===this.$route.query.coupon_applied||["creditCardInput","purchasePaymentMethod"].includes(this.via)&&this.appliedCoupon?this.getAppliedCoupon():this.$store.commit(_.COUPON_MUTATION_TYPES.RESET_STATE)},selectablePaymentMethods(){return this.appliedCoupon?(this.paymentMethod="creditcard",V.filter((e=>"creditcard"===e.id))):V},changePaymentMethod(){!1===this.isCouponApplied&&this.$emit("changePaymentMethod",{supportPrice:this.magazine.price,nextPageDisableFollow:this.showWithFollow,withFollow:this.withFollow,paymentMethod:this.paymentMethod})},setWithFollow(e){this.withFollow=e},applyCoupon(e){var t=this;return Object(n.a)((function*(){t.couponErrorMessage="",t.isSubmitting=!0,yield t.$store.dispatch(_.COUPON_ACTION_TYPES.APPLY_COUPON,{couponCode:e,magazineKey:t.magazine.key});var r=t.$store.state.coupon.errored;r?400===r.status?t.couponErrorMessage="マガジンが存在しません。":404===r.status?t.couponErrorMessage="クーポンコードに誤りがあります。クーポンコードをご確認ください。":406===r.status?t.couponErrorMessage="有効期限外のクーポンです。クーポンの有効期限をご確認ください。":409===r.status?t.couponErrorMessage="入力したクーポンコードは既に使用済みです。":t.couponErrorMessage=r.data.error:yield k(t.$tracker,{action:"accepted",key:t.magazine.key}),t.isSubmitting=!1}))()},invalidCoupon(e){this.couponErrorMessage=e},subscribe(){var e=this;return Object(n.a)((function*(){if(e.couponErrorMessage&&!(yield K("クーポンが無効になっています。このまま購読しますか？")))return;e.isSubmitting=!0,yield e.$store.dispatch(v.PURCHASE_ACTION_TYPES.SUBSCRIBE_MAGAZINE,{paymentMethod:e.paymentMethod,magazine:e.magazine,isCouponApplied:e.isCouponApplied,conversionKind:e.conversionKind,conversionContentKey:e.conversionContentKey,returnUrl:e.isModal?null:"".concat(c.defaultBaseUrl,"/a/purchase/after_purchase"),referrer:e.$prevPage});var t=e.$store.state.purchase.errored;if(t)return e.apiError=t,void(e.isSubmitting=!1);e.showWithFollow&&e.withFollow&&(yield e.followUser({userId:e.magazine.user.id,userKey:e.magazine.user.key,via:"subscription_magazine"})),e.isCouponApplied&&(yield k(e.$tracker,{action:"subscribed",key:e.magazine.key})),e.$emit("afterPurchase",{paymentMethod:e.paymentMethod,purchaseResponse:e.$store.state.purchase.successed})}))()},handleGoToCreditCardInput(){window.history.pushState({},""),this.$emit("inputCard",{})},getAppliedCoupon(){this.$store.dispatch(_.COUPON_ACTION_TYPES.GET_APPLIED_COUPON,this.magazine.key)},closeModal(){l.q.remove("note-detail-paywall-click"),this.$store.dispatch(v.PURCHASE_ACTION_TYPES.SET_BEFORE_PURCHASING_PLACE,""),this.$emit("close")},paymentLabel(e){var t="monthly_",r=e.startsWith(t)?e.slice(8):e,n=this.$store.state.purchase.currentCreditCardNumber;if("creditcard"===r&&this.currentUser.canCheckout&&n){var o=c.paymentLabels[r];return"".concat(n," (").concat(o,")")}return c.paymentLabels[r]}})}),Z=(r(4118),r(4120),Object(A.a)(J,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"max-w-[470px] mx-auto"},[r("div",{staticClass:"p-4 bg-background-secondary"},[r("div",{staticClass:"flex"},[r("div",{staticClass:"absolute"},[r("nt-button",{staticClass:"relative bottom-1",attrs:{size:"small",type:"basic",disabled:e.isSubmitting},on:{click:function(t){return t.preventDefault(),e.closeModal()}}},[e._v("\n          戻る\n        ")])],1),e._v(" "),e._m(0)]),e._v(" "),r("div",{staticClass:"p-4 mt-4 bg-background-primary rounded-lg border border-border-default sm:px-6 sm:mt-6"},[r("div",{staticClass:"flex flex-col"},[r("div",{staticClass:"flex items-start flex-1 flex-wrap"},[r("h2",{staticClass:"font-bold leading-6 line-clamp-2 w-full"},[e._v("\n            "+e._s(e.magazine.name)+"\n          ")]),e._v(" "),r("div",{staticClass:"text-sm break-all text-text-secondary line-clamp-2 mt-1"},[e._v("\n            "+e._s(e.authorName)+"\n          ")])]),e._v(" "),r("div",{staticClass:"mt-4 pt-2 border-t-[1px] border-border-default"},[e.showFirstMonthFree&&!e.isCouponApplied?r("div",{staticClass:"flex content-center mt-0.5"},[r("nt-icon",{staticClass:"m-purchaseSubscribeMagazine__attentionIcon",attrs:{clickable:!1,size:"small",type:"check"}}),e._v(" "),r("div",{staticClass:"m-purchaseSubscribeMagazine__attentionText"},[e._v("\n              "+e._s(e.freeMonthPeriod)+"\n            ")])],1):e._e(),e._v(" "),r("div",{staticClass:"flex content-center mt-0.5"},[r("nt-icon",{staticClass:"m-purchaseSubscribeMagazine__attentionIcon",attrs:{clickable:!1,size:"small",type:"check"}}),e._v(" "),r("div",{staticClass:"m-purchaseSubscribeMagazine__attentionText"},[e._v("\n              購読月("+e._s(e.subscribableMonth)+")に追加されるすべての記事\n            ")])],1),e._v(" "),e.magazine.canReadAll?r("div",{staticClass:"flex content-center mt-0.5"},[r("nt-icon",{staticClass:"m-purchaseSubscribeMagazine__attentionIcon",attrs:{clickable:!1,size:"small",type:"check"}}),e._v(" "),r("div",{staticClass:"m-purchaseSubscribeMagazine__attentionText"},[e._v("\n              過去に追加されたすべての記事\n            ")])],1):e._e(),e._v(" "),e.magazine.canReadAll?e._e():r("div",{staticClass:"flex content-center mt-0.5"},[r("nt-icon",{staticClass:"m-purchaseSubscribeMagazine__attentionIcon",attrs:{clickable:!1,size:"small",type:"check"}}),e._v(" "),r("div",{staticClass:"m-purchaseSubscribeMagazine__attentionText"},[e._v("\n              全ての無料記事\n            ")])],1),e._v(" "),e.magazine.canReadAll?e._e():r("div",{staticClass:"flex content-center mt-0.5"},[r("nt-icon",{staticClass:"m-purchaseSubscribeMagazine__cautionIcon",attrs:{clickable:!1,size:"small",type:"warning"}}),e._v(" "),r("div",{staticClass:"m-purchaseSubscribeMagazine__attentionText"},[e._v("\n              購読月外に追加された有料記事は購入が必要\n            ")])],1),e._v(" "),e.isCouponApplied?r("div",{staticClass:"flex content-center mt-0.5"},[r("nt-icon",{staticClass:"m-purchaseSubscribeMagazine__cautionIcon",attrs:{clickable:!1,size:"small",type:"warning"}}),e._v(" "),e._m(1)],1):e._e()]),e._v(" "),e.isCouponUsable||e.couponErrorMessage?r("div",{staticClass:"mt-4 pt-2 border-t-[1px] border-border-default"},[r("coupon-form",{attrs:{magazine:e.magazine},on:{apply:e.applyCoupon,invalid:e.invalidCoupon}}),e._v(" "),e.couponErrorMessage?r("form-error-list",[r("div",[e._v(e._s(e.couponErrorMessage))])]):e._e()],1):e._e(),e._v(" "),r("div",{staticClass:"flex mt-4 pt-2 border-t border-border-default"},[e.isCouponApplied?r("div",{staticClass:"flex-col w-full"},[r("div",{staticClass:"flex justify-between items-center"},[r("span",{staticClass:"text-text-secondary text-xs"},[r("nt-time",{attrs:{datetime:e.appliedCoupon.freeSubscriptionEndedAt,format:"YYYY年M月D日"}}),e._v("まで\n              ")],1),e._v(" "),r("div",[r("span",{staticClass:"font-bold",attrs:{"aria-hidden":!0}},[e._v("\n                  ¥\n                ")]),e._v(" "),r("nt-currency",{staticClass:"font-bold whitespace-nowrap text-2xl",attrs:{amount:0,prefix:""}}),e._v(" "),r("span",{staticClass:"visually-hidden"},[e._v("円")]),e._v(" "),r("span",{staticClass:"text-lg"},[e._v(" / 月")])],1)]),e._v(" "),r("div",{staticClass:"flex justify-between items-center"},[r("span",{staticClass:"text-text-secondary text-xs"},[r("nt-time",{attrs:{datetime:e.appliedCoupon.paymentStartedAt,format:"YYYY年M月D日"}}),e._v("以降\n              ")],1),e._v(" "),r("div",[r("span",{staticClass:"font-bold",attrs:{"aria-hidden":!0}},[e._v("\n                  ¥\n                ")]),e._v(" "),r("nt-currency",{staticClass:"font-bold whitespace-nowrap text-2xl",attrs:{amount:e.magazine.price,prefix:""}}),e._v(" "),r("span",{staticClass:"visually-hidden"},[e._v("円")]),e._v(" "),r("span",{staticClass:"text-lg"},[e._v(" / 月")])],1)])]):r("div",{staticClass:"w-full"},[r("div",{staticClass:"flex justify-end items-center"},[r("div",[r("span",{staticClass:"font-bold",attrs:{"aria-hidden":!0}},[e._v("\n                  ¥\n                ")]),e._v(" "),r("nt-currency",{staticClass:"font-bold whitespace-nowrap text-2xl",attrs:{amount:e.magazine.price,prefix:""}}),e._v(" "),r("span",{staticClass:"visually-hidden"},[e._v("円")]),e._v(" "),r("span",{staticClass:"text-lg"},[e._v(" / 月")])],1)])])])])])]),e._v(" "),e.isDrawShown?r("div",{staticClass:"mt-3 px-4"},[r("draw-campaign-message",{attrs:{design:"plain"}})],1):e._e(),e._v(" "),r("div",{staticClass:"px-4"},[e.showSubscribeButton?r("div",{staticClass:"py-4 border-b border-border-default"},[r("div",[r("div",{staticClass:"flex justify-between items-center"},[r("h3",{staticClass:"text-text-secondary text-sm"},[e._v("\n            お支払い\n          ")]),e._v(" "),r("button",{staticClass:"flex items-center p-0",on:{click:function(t){return e.changePaymentMethod()}}},[r("span",{staticClass:"font-bold text-text-primary text-base"},[e._v("\n              "+e._s(e.paymentLabel(e.paymentMethod))+"\n            ")]),e._v(" "),!1===e.isCouponApplied?r("span",[r("nt-icon",{staticClass:"ml-2 text-text-clickable",attrs:{type:"navnext",clickable:!1}})],1):e._e()])])])]):e._e(),e._v(" "),e.showWithFollow?r("div",{staticClass:"py-4 border-b border-border-default"},[r("div",{staticClass:"inline-block"},[r("form-checkbox",{attrs:{id:"withFollow",value:!0,checked:e.withFollow,label:"クリエイターをフォロー"},on:{input:e.setWithFollow}})],1)]):e._e(),e._v(" "),e.isShowWarningMessage?r("warning-message",{staticClass:"mt-8",attrs:{"show-icon":!0,"show-help":!0,"help-link":"https://www.help-note.com/hc/ja/articles/25136259858457","help-aria-label":"定期購読マガジンの初月無料についてヘルプページ","icon-type":"warning",type:"warning"}},[r("template",{slot:"title"},[e._v("\n        初月無料が適用されません\n      ")]),e._v(" "),r("template",{slot:"message"},[e._v("\n        "+e._s(e.warningMessage)+"\n      ")])],2):e._e(),e._v(" "),e.apiError?r("form-error-list",{staticClass:"m-purchaseSubscribeMagazine__item"},[r("credit-card-error-message",{attrs:{"error-message":e.toApiErrorMessage(e.apiError)}})],1):e._e(),e._v(" "),r("div",{staticClass:"flex flex-col py-8",class:e.isShowWarningMessage?"pt-4 pb-8":""},[e.showSubscribeButton?r("nt-button",{attrs:{disabled:e.isSubmitting,size:"large",width:"fit",type:"primary"},on:{click:function(t){return t.preventDefault(),e.subscribe()}}},[e._v("\n        購読する\n      ")]):e.isCouponApplied?r("nt-button",{attrs:{disabled:e.isSubmitting,size:"large",width:"fit",type:"primary"},on:{click:function(t){return t.preventDefault(),e.handleGoToCreditCardInput(t)}}},[e._v("\n        カード情報入力画面へ\n      ")]):r("nt-button",{attrs:{disabled:e.isSubmitting,size:"large",width:"fit",type:"primary"},on:{click:function(t){return t.preventDefault(),e.changePaymentMethod(t)}}},[e._v("\n        お支払い方法を選択\n      ")])],1),e._v(" "),r("div",{staticClass:"flex justify-center"},[r("p",{staticClass:"text-text-secondary text-xs mr-2"},[r("nt-link-functional",{staticClass:"underline inline-block hover:text-text-primary lg:transition-all",attrs:{href:"https://help-note.com/hc/ja/articles/6253267645337",target:"_blank"}},[e._v("\n          購入時のご確認\n        ")])],1),e._v(" "),r("p",{staticClass:"text-text-secondary text-xs"},[r("nt-link-functional",{staticClass:"underline inline-block hover:text-text-primary lg:transition-all",attrs:{href:"https://help-note.com/hc/ja/articles/360000670602/",target:"_blank"}},[e._v("\n          返金不可\n        ")])],1)])],1)])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-1 justify-center"},[r("h1",{staticClass:"font-bold"},[e._v("\n          購入の確認\n        ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-purchaseSubscribeMagazine__attentionText"},[e._v("\n              クーポンを使用して購読される場合は、"),r("br"),e._v("\n              クレジットカードでの決済のみとなります。\n            ")])}],!1,null,"2ff05555",null));t.a=Z.exports},4403:function(e,t,r){"use strict";var n=r(0),o=(r(11),r(26),r(12),r(19),r(55),r(14),r(231),r(30),r(1)),l=r(54),c=r(193),d=r(249),h=r(43),m=r(3160),v=r(191),_=r(248),f=r(3126),y=r(57),C=r(379),x=(r(29),r(2870)),M=r(374),w=r(3983),P=r(2977),S=r(3161),k=o.a.extend({components:{NtCurrency:x.a,ColorLabel:M.a,MembershipBenefitList:w.a},props:{plan:{type:Object,default:void 0}},computed:{isShowFirstMonthFreeLabel(){return this.plan.isFreeTrialPeriodAvailable},limitedNumberPlanText(){var e,t,r,n,o=this.plan;if(!1===(null===(e=o.limitedMemberInfo)||void 0===e?void 0:e.visibleCount))return"人数制限あり";if(0===(null===(t=o.limitedMemberInfo)||void 0===t?void 0:t.remainingCount))return"募集終了";var l=(null!==(n=null===(r=o.limitedMemberInfo)||void 0===r?void 0:r.remainingCount)&&void 0!==n?n:0).toString().replace(/(\d)(?=(?:\d{3})+\b)/g,"$1,");return"あと".concat(l,"人募集中")},editableParticipantLimit(){var e,t;return null!==(t=null===(e=this.plan.limitedMemberInfo)||void 0===e?void 0:e.editableParticipantLimit)&&void 0!==t&&t},freeMonthPeriod(){var e=this.plan;if(null===e.freeTrialPeriod){var t=e.subscription;return null===t||!1===t.freeSubscribe||Object(S.isBefore)(t.expiresAt,new Date)?"":"".concat(Object(P.b)(t.expiresAt,"M月D日"),"まで無料")}return Object(S.isBefore)(e.freeTrialPeriod.endAt,new Date)?"":"".concat(Object(P.b)(e.freeTrialPeriod.endAt,"M月D日"),"まで無料")}}}),T=(r(4129),r(7)),A=Object(T.a)(k,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-purchaseCoverForMembership flex flex-col"},[r("div",{staticClass:"flex items-center gap-1 flex-1 flex-wrap"},[r("h2",{staticClass:"font-bold leading-6"},[e._v("\n      "+e._s(e.plan.name)+"\n    ")]),e._v(" "),r("div",{staticClass:"flex items-center gap-1"},[e.isShowFirstMonthFreeLabel?r("color-label",{attrs:{text:"初月無料",size:"small"}}):e._e(),e._v(" "),null!==e.plan.limitedMemberInfo?r("color-label",{attrs:{text:e.limitedNumberPlanText,size:"small"}}):e._e()],1)]),e._v(" "),r("div",{staticClass:"text-xs break-all text-text-secondary mt-1 mb-3"},[e._v("\n    "+e._s(e.plan.circle.owner.name)+"\n    "),e.editableParticipantLimit?r("p",{staticClass:"mt-3"},[e._v("\n      ※ あとから人数が変更される可能性があります\n    ")]):e._e()]),e._v(" "),r("div",{staticClass:"border-t-[1px] border-border-default"}),e._v(" "),r("div",{staticClass:"my-3"},[r("membership-benefit-list",{attrs:{plan:e.plan}})],1),e._v(" "),r("div",{staticClass:"border-t border-border-default"}),e._v(" "),r("div",{staticClass:"flex flex-col items-end mt-3"},[r("div",{staticClass:"flex items-center gap-2"},[r("span",{staticClass:"text-md font-bold self-end leading-6 mb-1",attrs:{"aria-hidden":!0}},[e._v("\n        ¥\n      ")]),e._v(" "),r("nt-currency",{staticClass:"font-bold text-2xl whitespace-nowrap leading-9",attrs:{amount:e.plan.price,prefix:""}}),e._v(" "),r("span",{staticClass:"font-bold text-md self-end leading-6 mb-[0.1875rem]"},[e._v("\n        /月\n      ")])],1),e._v(" "),r("span",{staticClass:"text-text-secondary text-xs"},[e._v("\n      "+e._s(e.freeMonthPeriod)+"\n    ")])])])}),[],!1,null,"68c6fb6c",null).exports,z=r(3143),N=r(375),E=r(10),$=r(588),O=r(3688),L="（PayPayへ）",I=o.a.extend({components:{NtButton:h.a,NtLinkFunctional:v.default,NtSwitch:m.a,PurchaseCoverForMembership:A,NtSvgIcon:_.default,PaypayCampaignMessage:()=>r.e(48).then(r.bind(null,3981)),WarningMessage:()=>r.e(131).then(r.bind(null,3295)),DrawCampaignMessage:O.a},mixins:[l.a,c.a,d.a,N.a],props:{plan:{type:Object,required:!0},placeType:{type:String,default:"purchase-subscribe-circle-plan-modal"},actionLogSection:{type:String,default:"purchase-subscribe-membership-plan"}},data:()=>({allowAppearInMemberList:!0,isSubmitting:!1,creditCardErrorMessage:""}),computed:{shouldInputCard(){return"creditcard"===this.paymentMethod&&!this.currentUser.canCheckout&&this.plan.price>0},paymentMethod(){return this.plan.price>0?this.$store.state.purchase.paymentMethodForMembershipPlan:void 0},circleOwner(){return this.plan.circle.owner},isShowFirstMonthFreeLabel(){return this.plan.isFreeTrialPeriodAvailable},memberStatus(){return this.plan.isCanceled?"is_canceled":this.plan.isMember?"is_member":this.shouldInputCard?"should_input_card":"can_subscribe"},buttonText(){if(this.plan.isCanceled){var e="paypay"===this.paymentMethod?L:"";return"".concat("更新する").concat(e)}if(this.plan.isMember)return"参加中";if(this.isExceededUserLimit)return"募集終了";var t="paypay"===this.paymentMethod?L:"";return this.isShowFirstMonthFreeLabel?"初月無料で参加する".concat(t):"参加する".concat(t)},isExceededUserLimit(){var e;return 0===(null===(e=this.plan.limitedMemberInfo)||void 0===e?void 0:e.remainingCount)},isButtonDisabled(){return this.isSubmitting||this.plan.isMember&&!1===this.plan.isCanceled||this.isExceededUserLimit&&!1===this.plan.isCanceled||this.shouldInputCard},paymentMethodLabel(){switch(this.$store.state.purchase.paymentMethodForMembershipPlan){case"creditcard":var e=E.paymentLabels[this.paymentMethod],t=this.$store.state.purchase.currentCreditCardNumber;return this.currentUser.canCheckout&&t?"".concat(t).concat(e?" (".concat(e,")"):""):e;case"paypay":return E.paymentLabels[this.paymentMethod];default:return""}},isShowPaypayCampaign:z.d,isShowPaypayCampaignLabel(){return this.isShowPaypayCampaign&&"paypay"!==this.paymentMethod&&Object(z.c)(this.plan.price)},isWarningMessageShown(){var{plan:e}=this;return!e.isCanceled&&!e.isImmediateCharge&&!this.isShowFirstMonthFreeLabel},warningMessage(){var{plan:e}=this;return null===(null==e?void 0:e.reasonForNotFreeTrialPeriod)||void 0===(null==e?void 0:e.reasonForNotFreeTrialPeriod)||""===(null==e?void 0:e.reasonForNotFreeTrialPeriod)?"":"already used"===e.reasonForNotFreeTrialPeriod?"すでにご利用済みのため、今回は適用されません。":"another account used"===e.reasonForNotFreeTrialPeriod&&"creditcard"===this.paymentMethod?"同じプランでご利用済みのクレジットカードのため、初月無料の対象外です。":"another account used"===e.reasonForNotFreeTrialPeriod?"お一人様一回限りの特典のため、初月無料が適用されない場合がございます。なお、適用の条件は公開しておりません。":""},isDrawActive(){return this.$store.getters[$.DRAW_GETTER_TYPES.IS_ACTIVE]},isDrawShown(){var e=this.isShowPaypayCampaignLabel,t=0===this.plan.price||this.plan.isFreeTrialPeriodAvailable;return!!this.isDrawActive&&(!e&&!t)}},mounted(){void 0===this.$store.state.purchase.paymentMethodForMembershipPlan&&Boolean(this.currentUser.defaultPaymentMethod)&&["creditcard","paypay"].includes(this.currentUser.defaultPaymentMethod)&&this.$store.commit(Object(y.purchaseMutation)("SET_PAYMENT_METHOD_FOR_MEMBERSHIP_PLAN"),this.currentUser.defaultPaymentMethod),Object(f.c)(this.$tracker,{kind:f.a.cv_purchasing_process,action:"imp",contentType:"CirclePlan",contentKey:this.plan.key,placeType:this.placeType,purchaseType:"subscription",prev:this.$route.query.prev,section:this.actionLogSection},{member_status:this.memberStatus})},methods:{isBoardDisabled:C.a,init(){var e=this;return Object(n.a)((function*(){e.allowAppearInMemberList=!0}))()},setAllowAppearInMemberList(e){this.allowAppearInMemberList=e},setWithFollow(e){this.withFollow=e},postSubscribe(){var e=this;return Object(n.a)((function*(){if(!e.isButtonDisabled){if(e.isSubmitting=!0,e.$tracker.trackActionLogs([e.$tracker.buildActionLogRecordV2({event:"click",target:"subscribe-membership-plan-button",section:e.actionLogSection,contents:{content_type:"CirclePlan",content_key:e.plan.key,experimentInfo:{},with_follow:e.withFollow,allow_appear_in_member_list:e.allowAppearInMemberList}})]),e.plan.price>0&&"paypay"===e.$store.state.purchase.paymentMethodForMembershipPlan){var t=yield r.e(593).then(r.bind(null,6585)),n=new URLSearchParams(window.location.search);n.set("mlist",e.allowAppearInMemberList.toString());var{formAttributes:o,inputs:l}=yield t.startPaypayAcceptance(e,"".concat(window.location.origin,"/a/purchase/subscribe_membership_plan_paypay_acceptance_callback?").concat(n.toString()),"".concat(window.location.origin,"/a/purchase/subscribe_membership_plan?").concat(n.toString())),form=document.createElement("form");return form.action=o.action,form.method="POST",l.forEach((input=>{var e=document.createElement("input");e.type="hidden",e.name=input.name,e.value=input.value,form.appendChild(e)})),document.body.appendChild(form),void form.submit()}var c=e.plan.key,d={allow_appear_in_member_list:e.allowAppearInMemberList,payment_method:"creditcard",front_referrer:e.$prevPage};try{var h=(yield e.$axios.post("/v2/subscriptions/circle_plans/".concat(c),d)).data.data.thanksMessage;e.$emit("after-subscribe",{thanksMessage:h})}catch(t){e.creditCardErrorMessage=e.toApiErrorMessage(t.response)}e.withFollow&&!e.circleOwner.isFollowing&&(yield e.followUser({userId:e.circleOwner.id,userKey:e.circleOwner.key})),e.isSubmitting=!1}}))()},handleClickCancel(){this.$store.dispatch(y.PURCHASE_ACTION_TYPES.SET_BEFORE_PURCHASING_PLACE,""),this.$emit("click-cancel")},isCreditCardError:e=>/クレジットカードの(情報|有効期限)をお確かめ/.test(e)}}),j=Object(T.a)(I,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-subscribeMembershipPlan max-w-[470px] mx-auto "},[r("div",{staticClass:"p-4 bg-background-secondary"},[r("div",{staticClass:"relative flex flex-1 justify-center"},[r("h1",{staticClass:"font-bold leading-8"},[e._v("\n        参加内容の確認\n      ")]),e._v(" "),r("div",{staticClass:"absolute left-0"},[r("nt-button",{attrs:{size:"small",type:"basic",disabled:e.isSubmitting},on:{click:function(t){return t.preventDefault(),e.handleClickCancel(t)}}},[e._v("\n          戻る\n        ")])],1)]),e._v(" "),r("div",{staticClass:"p-4 mt-4 bg-background-primary border border-border-default rounded-lg sm:px-6 sm:mt-6"},[r("purchase-cover-for-membership",{attrs:{plan:e.plan}})],1)]),e._v(" "),e.isDrawShown?r("div",{staticClass:"mt-3 px-4"},[r("draw-campaign-message",{attrs:{design:"plain"}})],1):e._e(),e._v(" "),r("div",{staticClass:"flex flex-col px-4"},[e.isShowPaypayCampaignLabel?r("paypay-campaign-message",{staticClass:"mt-4 -mb-1 py-2 bg-surface-quaternary"}):e._e(),e._v(" "),e.plan.price>0?r("div",{staticClass:"py-5 flex justify-between items-center w-full"},[r("span",{staticClass:"text-text-secondary text-sm"},[e._v("お支払い")]),e._v(" "),r("button",{staticClass:"flex items-center gap-x-1",attrs:{type:"button",disabled:e.isSubmitting},on:{click:function(t){return e.$emit("change-payment-method")}}},[r("span",{staticClass:"font-bold text-text-primary text-sm"},[e._v("\n          "+e._s(e.paymentMethodLabel)+"\n        ")]),e._v(" "),r("nt-svg-icon",{attrs:{type:"navNext"}})],1)]):e._e(),e._v(" "),e.creditCardErrorMessage?r("warning-message",{staticClass:"-mt-2 mb-4",attrs:{type:"error","icon-color":"error","icon-size":"medium"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\n        "+e._s(e.creditCardErrorMessage)+"\n      ")]},proxy:!0}],null,!1,1508850874)}):e._e(),e._v(" "),r("div",{staticClass:"border-t-[1px] border-border-default"}),e._v(" "),r("div",{staticClass:"flex flex-col gap-[0.625rem] pt-4"},[r("div",{staticClass:"py-1 flex justify-between items-center w-full"},[r("span",{staticClass:"text-text-secondary text-sm",attrs:{id:"membership-visibility-label"}},[e._v("\n          参加状況を公開（後から変更できます）\n        ")]),e._v(" "),r("nt-switch",{attrs:{"on-text":"","off-text":"","aria-labelledby":"membership-visibility-label",value:e.allowAppearInMemberList,disabled:e.isButtonDisabled},on:{change:e.setAllowAppearInMemberList}})],1),e._v(" "),!1===e.circleOwner.isFollowing?r("div",{staticClass:"py-1 flex justify-between items-center w-full"},[r("span",{staticClass:"text-text-secondary text-sm",attrs:{id:"with-follow-label"}},[e._v("\n          クリエイターをフォロー\n        ")]),e._v(" "),r("nt-switch",{attrs:{"on-text":"","off-text":"","aria-labelledby":"with-follow-label",value:e.withFollow,disabled:e.isButtonDisabled},on:{change:e.setWithFollow}})],1):e._e()]),e._v(" "),r("div",{staticClass:"border-t-[1px] border-border-default mt-4"}),e._v(" "),r("div",{staticClass:"mt-8"},[r("p",{staticClass:"text-text-primary text-xs",class:{"py-2 bg-background-secondary rouded text-center":e.plan.isCanceled}},[e.plan.isCanceled?[e._v("\n          新しい決済は"),r("strong",[e._v("翌月1日")]),e._v("から開始されます\n        ")]:[e._v("\n          メンバーシップはいつでも解約でき、解約月の月末まではコンテンツをお楽しみいただけます\n        ")]],2)]),e._v(" "),e.isWarningMessageShown?r("warning-message",{staticClass:"mt-4",attrs:{"show-icon":!0,"show-help":!0,"help-link":"https://www.help-note.com/hc/ja/articles/22837660959385","help-aria-label":"メンバーシップに参加する (メンバー向け）ヘルプページ","icon-type":"warning",type:"warning"}},[r("template",{slot:"title"},[e._v("\n        初月無料が適用されません\n      ")]),e._v(" "),r("template",{slot:"message"},[e._v("\n        "+e._s(e.warningMessage)+"\n      ")])],2):e._e(),e._v(" "),r("div",{staticClass:"mt-4"},[r("nt-button",{attrs:{disabled:e.isButtonDisabled,type:e.isSubmitting?"disabled":"primary",width:"fit",size:"large"},on:{click:function(t){return t.preventDefault(),e.postSubscribe(t)}}},[e._v("\n        "+e._s(e.buttonText)+"\n      ")])],1),e._v(" "),r("div",{staticClass:"flex justify-center py-2 mt-4 mb-24"},[r("span",{staticClass:"text-text-secondary text-xs"},[r("nt-link-functional",{staticClass:"underline inline-block hover:text-text-primary lg:transition-all",attrs:{href:"https://www.help-note.com/hc/ja/articles/6253267645337",target:"_blank"}},[e._v("\n          購入時のご確認\n        ")])],1),e._v(" "),r("span",{staticClass:"text-text-secondary text-xs ml-4"},[r("nt-link-functional",{staticClass:"underline inline-block hover:text-text-primary lg:transition-all",attrs:{href:"https://www.help-note.com/hc/ja/articles/900000861826",target:"_blank"}},[e._v("\n          メンバーシップについて\n        ")])],1)])],1)])}),[],!1,null,null,null);t.a=j.exports},4404:function(e,t,r){"use strict";var n=r(0),o=r(1),l=r(43),c=r(191),d=r(37),h=r(34),m=r(83),v=o.a.extend({components:{NtLinkFunctional:c.default}}),_=(r(4133),r(7)),f=Object(_.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{staticClass:"m-purchaseConfirmLink"},[r("nt-link-functional",{staticClass:"m-purchaseConfirmLink__target",attrs:{href:"https://help-note.com/hc/ja/articles/6253267645337",target:"_blank"}},[e._v("\n    有料コンテンツの購入についての確認事項\n  ")])],1)}),[],!1,null,"34437e0c",null).exports,y=r(2870),C=r(3459),x=r(57),M=r(33),w=r(2977),P=r(54),S=r(193),k=o.a.extend({components:{CreditCardErrorMessage:C.a,NtCurrency:y.a,PurchaseConfirmLink:f,FormErrorList:m.a,NtIcon:h.default,NtImage:d.default,NtLinkFunctional:c.default,NtButton:l.a},mixins:[P.a,S.a],data:()=>({apiError:null}),computed:{premiumPlan(){return this.$store.state.modal.purchaseModalContainer.premiumPlan},nextChargesAt(){return Object(w.b)(this.premiumPlan.nextChargesAt,"YYYY年M月D日")}},methods:{close(){this.$emit("close")},handleGoToCreditCardInput(){window.history.pushState({},""),this.$emit("inputCard",{})},subscribe(){var e=this;return Object(n.a)((function*(){yield e.$store.dispatch(x.PURCHASE_ACTION_TYPES.SUBSCRIBE_PREMIUM,{premiumPlan:e.premiumPlan});var t=e.$store.state.purchase.errored;t?e.apiError=t:(yield e.$store.dispatch(M.USER_ACTION_TYPES.AUTH),e.$emit("afterPurchase",{paymentMethod:"creditcard",purchaseResponse:e.$store.state.purchase.successed}))}))()}}}),T=Object(_.a)(k,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("h1",{staticClass:"p-4 text-base text-text-primary text-center border-b border-border-default"},[e._v("\n    noteプレミアムに申し込む\n  ")]),e._v(" "),r("div",[e.premiumPlan?r("div",{staticClass:"p-6"},[r("div",{staticClass:"flex gap-5 mb-5"},[r("nt-image",{staticClass:"w-15 h-15 border border-border-default border-solid rounded-lg",attrs:{src:"~/assets/images/default_note_logo_202212.png",lazy:!1,width:"60",height:"60",alt:""}}),e._v(" "),r("div",[r("div",{staticClass:"font-bold"},[e._v("\n            "+e._s(e.premiumPlan.name)+"\n          ")]),e._v(" "),r("div",{staticClass:"text-xs"},[r("nt-link-functional",{staticClass:"text-text-success",attrs:{href:"https://premium.lp-note.com",target:"_blank"}},[e._v("\n              "+e._s(e.premiumPlan.name)+"についてはこちら\n            ")])],1)])],1),e._v(" "),r("div",{staticClass:"bg-background-secondary border border-border-default p-6 pl-10"},[r("div",{staticClass:"mb-4 text-xl font-bold text-center"},[r("span",{staticClass:"text-xs font-normal"},[e._v("¥")]),e._v(" "),r("nt-currency",{attrs:{prefix:"",amount:e.premiumPlan.price,suffix:""}}),e._v(" "),r("span",{staticClass:"text-xs font-normal"},[e._v(" / 月")])],1),e._v(" "),r("ul",{staticClass:"mt-4 flex flex-col gap-2"},[r("li",{staticClass:"flex items-center gap-2"},[r("nt-icon",{staticClass:"text-text-success",attrs:{clickable:!1,size:"small",type:"check"}}),e._v(" "),r("div",{staticClass:"flex-1 text-xs font-bold text-text-secondary"},[e.premiumPlan.freeTrialIsAvailable?[e._v("\n                来月より課金開始（加入月無料）\n              ")]:[e._v("\n                今月より課金開始\n              ")]],2)],1),e._v(" "),r("li",{staticClass:"flex items-center gap-2"},[r("nt-icon",{staticClass:"text-text-success",attrs:{clickable:!1,size:"small",type:"check"}}),e._v(" "),r("div",{staticClass:"flex-1 text-xs font-bold text-text-secondary"},[e._v("\n              次回課金日: "+e._s(e.nextChargesAt)+"\n            ")])],1)])]),e._v(" "),e.apiError?r("form-error-list",{staticClass:"o-premiumSubscribeModal__error"},[r("credit-card-error-message",{attrs:{"error-message":e.toApiErrorMessage(e.apiError)}})],1):e._e()],1):e._e(),e._v(" "),r("purchase-confirm-link")],1),e._v(" "),r("div",{staticClass:"p-4 bg-background-secondary border-t border-border-default flex items-center justify-end gap-2"},[r("nt-button",{attrs:{type:"basic",size:"small"},on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("\n      キャンセル\n    ")]),e._v(" "),e.currentUser.canCheckout?e._e():r("nt-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleGoToCreditCardInput}},[e._v("\n      カード情報入力画面へ\n    ")]),e._v(" "),!e.currentUser.isPremiumUser&&e.currentUser.canCheckout?r("nt-button",{attrs:{type:"primary",size:"small"},on:{click:e.subscribe}},[e._v("\n      noteプレミアムに申込\n    ")]):e._e(),e._v(" "),e.currentUser.isPremiumUser?r("nt-button",{attrs:{disabled:!0,type:"secondary",size:"small"}},[e._v("\n      noteプレミアム登録済\n    ")]):e._e()],1)])}),[],!1,null,null,null);t.a=T.exports},4414:function(e,t,r){"use strict";r(11),r(26),r(12),r(19),r(28),r(18);var n=r(1),o=r(580),l=r(17),c=r(192),d=r(155),h=r(404),m=r(43),v=r(37),_=r(10),f=r(54),y=r(200),C=r(3126),x=r(256),M=r(248),w=r(3490),P=n.a.extend({components:{Avatar:c.default,Confetti:()=>Promise.all([r.e(28),r.e(34)]).then(r.bind(null,6886)),ModalHeading:d.a,ModalShareButtons:h.a,NtButton:m.a,NtImage:v.default,NtSvgIcon:M.default,NtLinkFunctional:()=>Promise.resolve().then(r.bind(null,191))},mixins:[f.a],props:{isModal:{type:Boolean,default:!1},placeType:{type:String,default:"purchase-modal"},shareClickTrackingParam:{type:Object,default:()=>({})}},data:()=>({twShareUrl:null,fbShareUrl:null,lineShareUrl:null,showShareButtons:!1,shareTarget:{},shareTargetType:""}),computed:{modalName:()=>"afterPurchaseMessage",noteDetail(){return this.$store.state.pages.noteDetail.data},note(){return this.$store.state.purchase.note},magazine(){return this.$store.state.purchase.magazine},magazineLayout(){var e,t;return null===(t=null===(e=this.$store.state.pages)||void 0===e?void 0:e.magazineTop)||void 0===t?void 0:t.magazineLayout},allowedActionTypes:()=>Object.keys(_.afterPurchase),actionType(){return this.$store.state.modal.purchaseModalContainer.actionType},camelizedActionType(){return this.actionType?Object(o.a)(this.actionType):null},creatorImage(){return this.$store.state.modal.purchaseModalContainer.creatorImage},creatorMessage(){return this.$store.state.modal.purchaseModalContainer.creatorMessage},messageDisplayOptions(){return this.$store.state.modal.purchaseModalContainer.messageDisplayOptions},title(){return this.allowedActionTypes.includes(this.camelizedActionType)?_.afterPurchase[this.camelizedActionType].title:null},message(){return this.allowedActionTypes.includes(this.camelizedActionType)?this.creatorMessage||_.afterPurchase[this.camelizedActionType].defaultMessage:null},sharePromptMessage(){return _.afterPurchase[this.camelizedActionType].sharePromptMessage},beforePurchasingPlaceFromNote(){return"note-detail"===this.$store.state.purchase.beforePurchasingPlace},buttonText(){switch(this.actionType){case"support":return"記事に戻る";case"note_purchase":case"note_lead_form":return"記事を読む";case"magazine_purchase":case"magazine_subscribe":return this.beforePurchasingPlaceFromNote?"記事を読む":"購入したマガジンを見る";default:return"戻る"}},isPurchasingContents(){switch(this.actionType){case"support":default:return!1;case"note_purchase":case"note_lead_form":case"magazine_purchase":case"magazine_subscribe":return!0}},conversionMagazineId(){var e,t,r;return(null===(e=this.magazine)||void 0===e?void 0:e.id)?this.magazine.id:(null===(t=this.noteDetail)||void 0===t?void 0:t.magazine)?this.noteDetail.magazine.id:(null===(r=this.magazineLayout)||void 0===r?void 0:r.id)?this.magazineLayout.id:null},isConfettiShown(){var e;return!0===(null===(e=this.messageDisplayOptions)||void 0===e?void 0:e.confetti)},contentAuthor(){return this.$store.state.purchase.creator},referrerQueryParams:()=>({subRt:"share_apc"}),rewardPoints(){return this.$store.state.purchase.rewardPoints},isMobileAppLinkShown(){var e,t,r=this.$webview.isAndroidWebview,n=this.$ua.isFromAndroidOs(),o=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.isAppUser)&&void 0!==t&&t,l="magazine_subscribe"===this.actionType;return!r&&n&&!o&&l},androidStoreUrl:()=>w.a,mobileAppLinkImpTrackingParams(){var e;return{section:this.placeType,event:"imp",target:"mobile-app-store-button",contents:{type:"mobile-app-suggest-notification",action_type:this.actionType,magazine_key:(null===(e=this.magazine)||void 0===e?void 0:e.key)||""}}}},methods:{init(){var e,t,r,n;Object.assign(this.$data,{twShareUrl:null,fbShareUrl:null,lineShareUrl:null,showShareButtons:!1,shareTarget:{},shareTargetType:""});var o=l.q.get("note-detail-paywall-click"),c=this.$currentPage,d=this.$prevPage;switch(this.actionType){case"note_purchase":if(this.note){var{note:h}=this;this.twShareUrl=Object(x.c)({url:h.noteUrl,tweetText:h.tweetText,twitterRelatedAccounts:h.twitterRelatedAccounts,fallbackUrl:h.twitterShareUrl,referrerQueryParams:this.referrerQueryParams}),this.fbShareUrl=Object(x.a)({url:h.noteUrl,fallbackUrl:h.facebookShareUrl,referrerQueryParams:this.referrerQueryParams}),this.lineShareUrl=Object(x.b)({url:h.noteUrl,fallbackUrl:h.lineShareUrl,referrerQueryParams:this.referrerQueryParams}),this.showShareButtons=!(!this.twShareUrl||!this.fbShareUrl),this.shareTarget=h,this.shareTargetType="Note","true"===o&&this.sendPaywallLog(h.id,"Note",h.user.id),Object(y.a)(this.$axios,{targetId:h.id,targetType:"note",url:c,referrer:d,actionName:"Purchase"})}this.sendConversionLog("Note",null===(e=this.note)||void 0===e?void 0:e.key,"paid");break;case"support":if(this.note){var{note:m}=this;this.twShareUrl=Object(x.c)({url:m.noteUrl,tweetText:m.tweetText,twitterRelatedAccounts:m.twitterRelatedAccounts,fallbackUrl:m.twitterShareUrl,referrerQueryParams:this.referrerQueryParams}),this.fbShareUrl=Object(x.a)({url:m.noteUrl,fallbackUrl:m.facebookShareUrl,referrerQueryParams:this.referrerQueryParams}),this.lineShareUrl=Object(x.b)({url:m.noteUrl,fallbackUrl:m.lineShareUrl,referrerQueryParams:this.referrerQueryParams}),this.showShareButtons=!(!this.twShareUrl||!this.fbShareUrl),this.shareTarget=m,this.shareTargetType="Note","true"===o&&this.sendPaywallLog(m.id,"Note",m.user.id),Object(y.a)(this.$axios,{targetId:m.id,targetType:"note",url:c,referrer:d,actionName:"Support"})}this.sendConversionLog("Note",null===(t=this.note)||void 0===t?void 0:t.key,"support");break;case"note_lead_form":this.note&&(this.twShareUrl=this.note.twitterShareUrl,this.fbShareUrl=this.note.facebookShareUrl,this.lineShareUrl=this.note.lineShareUrl,this.showShareButtons=!(!this.twShareUrl||!this.fbShareUrl),this.shareTarget=this.note,this.shareTargetType="Note","true"===o&&this.sendPaywallLog(this.note.id,"Note",this.note.user.id),Object(y.a)(this.$axios,{targetId:this.note.id,targetType:"note",url:c,referrer:d,actionName:"LeadForm"})),this.sendConversionLog("Note",null===(r=this.note)||void 0===r?void 0:r.key,"lead_form");break;case"magazine_purchase":case"magazine_subscribe":if(this.magazine&&this.magazine.id&&(this.twShareUrl=this.magazine.twitterShareUrl,this.fbShareUrl=this.magazine.facebookShareUrl,this.lineShareUrl=this.magazine.lineShareUrl,this.showShareButtons=!(!this.twShareUrl||!this.fbShareUrl),this.shareTarget=this.magazine,this.shareTargetType="Magazine"),"true"===o&&this.sendPaywallLog(this.magazine.id,"Magazine",this.magazine.user.id),this.conversionMagazineId){var v="magazine_subscribe"===this.actionType?"Subscribe":"Purchase";Object(y.a)(this.$axios,{targetId:this.conversionMagazineId,targetType:"magazine",url:c,referrer:d,actionName:v})}var _="magazine_purchase"===this.actionType?"paid":"subscription";this.sendConversionLog("Magazine",null===(n=this.magazine)||void 0===n?void 0:n.key,_)}l.q.remove("note-detail-paywall-click")},close(){this.$emit("close")},sendPaywallLog(e,t,r){this.$tracker.trackActionLogs([this.$tracker.buildActionLogRecord({kind:"note-detail-paywall-finish",contents:{target_id:e,target_type:t,creator_user_id:r,is_logged_in:this.isLoggedIn}})])},sendConversionLog(e,t,r){Object(C.c)(this.$tracker,{kind:C.a.cv_purchase_completed,action:"imp",contentKey:t,contentType:e,placeType:this.placeType,purchaseType:r,experiment_info:{isModal:this.isModal,actionType:this.actionType}})},trackMobileAppLinkClick(){var e;this.$tracker.trackActionLogs([this.$tracker.buildActionLogRecordV2({section:this.placeType,event:"click",target:"mobile-app-store-button",contents:{type:"mobile-app-suggest-notification",action_type:this.actionType,action:"open-store",magazine_key:(null===(e=this.magazine)||void 0===e?void 0:e.key)||""}})])}}}),S=(r(4110),r(4112),r(7)),component=Object(S.a)(P,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:{"mt-6":!e.isModal}},[r("client-only",[e.isConfettiShown?r("confetti"):e._e()],1),e._v(" "),r("div",{staticClass:"m-basicModalContent__header",class:{"p-0 border-b-0":!e.isModal}},[e.isModal?r("modal-heading",[e._v("\n      "+e._s(e.title)+"\n    ")]):[r("h1",{staticClass:"text-center font-bold"},[e._v("\n        "+e._s(e.title)+"\n      ")])]],2),e._v(" "),r("div",{staticClass:"o-afterPurchaseMessageModal__body"},[r("div",{staticClass:"o-afterPurchaseMessageModal__item"},[r("div",{staticClass:"o-afterPurchaseMessageModal__bg"},[r("nt-image",{staticClass:"o-afterPurchaseMessageModal__bgImage",attrs:{src:"~/assets/images/fig_supportthanks.png"}})],1),e._v(" "),r("div",{staticClass:"o-afterPurchaseMessageModal__avatar"},[e.creatorImage?r("avatar",{attrs:{src:e.creatorImage,size:"xxlarge"}}):r("nt-image",{staticClass:"o-afterPurchaseMessageModal__default",attrs:{src:"~/assets/images/default_note_logo_202212.png",alt:""}})],1),e._v(" "),r("div",{staticClass:"o-afterPurchaseMessageModal__message",domProps:{textContent:e._s(e.message)}})]),e._v(" "),e.rewardPoints>0?r("div",{staticClass:"flex justify-center items-center gap-1 my-6"},[r("i",{staticClass:"relative h-6 w-6"},[r("span",{staticClass:"absolute inset-1/2 h-1/2 w-1/2 -translate-y-1/2 -translate-x-1/2 rounded-full bg-yellow-900"}),e._v(" "),r("nt-svg-icon",{staticClass:"w-full h-full relative text-yellow-300",attrs:{type:"point"}})],1),e._v(" "),r("span",{staticClass:"font-bold text-base text-text-primary"},[e._v(e._s(e.rewardPoints))]),e._v(" "),r("span",{staticClass:"text-sm text-text-secondary"},[e._v("ポイント付与予定")])]):e._e(),e._v(" "),e.isPurchasingContents?r("div",{staticClass:"o-afterPurchaseMessageModal__formAction px-6"},[r("nt-button",{attrs:{type:"primary",width:"fit"},on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("\n        "+e._s(e.buttonText)+"\n      ")]),e._v(" "),e.isMobileAppLinkShown?r("div",{directives:[{name:"imp-track",rawName:"v-imp-track",value:e.mobileAppLinkImpTrackingParams,expression:"mobileAppLinkImpTrackingParams"}],staticClass:"p-4 rounded-lg text-sm font-bold flex border border-border-normal items-center bg-background-secondary mt-6"},[r("nt-svg-icon",{staticClass:"mr-4 text-text-secondary",attrs:{type:"phoneIphone"}}),e._v(" "),r("span",{staticClass:"mr-3"},[e._v("\n          アプリなら、記事の追加を通知でお知らせします\n        ")]),e._v(" "),r("nt-link-functional",{attrs:{href:e.androidStoreUrl,target:"_blank","is-button-link":"","button-type":"basic","button-size":"small"},on:{click:e.trackMobileAppLinkClick}},[e._v("\n          ストアへ\n        ")])],1):e._e()],1):e._e(),e._v(" "),e.showShareButtons?r("modal-share-buttons",{staticClass:"o-afterPurchaseMessageModal__shareButtons",attrs:{"tw-share-url":e.twShareUrl,"fb-share-url":e.fbShareUrl,"line-share-url":e.lineShareUrl,message:e.sharePromptMessage,"modal-name":e.modalName,"share-target":e.shareTarget,"share-target-type":e.shareTargetType,"additional-click-tracking-contents":e.shareClickTrackingParam}}):e._e()],1),e._v(" "),e.isPurchasingContents?e._e():[e.isModal?r("div",{staticClass:"m-basicModalContent__footer"},[r("nt-button",{attrs:{type:"basic",size:"small"},on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("\n        "+e._s(e.buttonText)+"\n      ")])],1):r("div",{staticClass:"flex items-center justify-center p-4"},[r("nt-button",{attrs:{type:"basic",size:"small"},on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("\n        "+e._s(e.buttonText)+"\n      ")])],1)]],2)}),[],!1,null,"eb4f0d52",null);t.a=component.exports},4415:function(e,t,r){"use strict";var n=r(0),o=(r(11),r(26),r(12),r(18),r(19),r(28),r(1)),l=r(61),c=r(3459),d=r(83),h=r(43),m=r(191),v=r(3674),_=r(10),f=r(3),y=r(57),C=r(106),x=r(249),M=r(375),w=r(193),P=r(3126),S=r(34),k=r(2870),T=r(3710),A=r(3143),z=o.a.extend({components:{NtCurrency:k.a,CreditCardErrorMessage:c.a,NtLinkFunctional:m.default,NtIcon:S.default,FormErrorList:d.a,NtButton:h.a,PurchaseCover:v.a,AmazonpayButton:T.a,PaypayCampaignMessage:()=>r.e(48).then(r.bind(null,3981))},mixins:[M.a,w.a,x.a],props:{placeType:{type:String,default:"purchase-confirm-modal"}},data:()=>({apiError:null,isSubmitting:!1}),computed:Object.assign(Object.assign({config:()=>_},Object(l.c)({discountCampaign:y.PURCHASE_GETTER_TYPES.DISCOUNT_CAMPAIGN})),{note(){return this.$store.state.purchase.note},magazine(){return this.$store.state.purchase.magazine},actionType(){return this.$store.state.modal.purchaseModalContainer.actionType},isSupport(){return"support"===this.actionType},isNotePurchase(){return"note_purchase"===this.actionType&&Boolean(this.note)},isMagazinePurchase(){return"magazine_purchase"===this.actionType&&Boolean(this.magazine)},isPurchase(){return this.isNotePurchase||this.isMagazinePurchase},contentName(){return"note_purchase"===this.actionType?this.note.name:this.magazine.name},purchaseCoverKind(){return this.isPurchase?this.isNotePurchase?"note":"magazine":null},contentAuthor(){return"note_purchase"===this.actionType||"support"===this.actionType?this.note.user:this.magazine.user},contentAuthorName(){return this.contentAuthor.nickname||this.contentAuthor.urlname},contentPrice(){return"note_purchase"===this.actionType?this.note.price:this.magazine.price},discountedPrice(){var e;return null===(e=this.discountCampaign)||void 0===e?void 0:e.discountedPrice},discountCampaignKind(){var e;return null===(e=this.discountCampaign)||void 0===e?void 0:e.kind},supportPrice(){return this.$store.state.modal.purchaseModalContainer.supportPrice},canRefund(){var e;return"note_purchase"===this.actionType&&!!(null===(e=this.note)||void 0===e?void 0:e.isRefund)},supportMessage(){return Object(C.n)(this.$store.state.modal.purchaseModalContainer.supportMessage)},isDefaultPaymentMethodPaypalOrAmazonpay(){return["paypal","amazonpay"].includes(this.currentUser.defaultPaymentMethod)},notSelectedPaymentMethod(){return""===this.$store.state.modal.purchaseModalContainer.paymentMethod},paymentMethod(){return this.isSupport&&this.isDefaultPaymentMethodPaypalOrAmazonpay&&this.notSelectedPaymentMethod?null:this.$store.state.modal.purchaseModalContainer.paymentMethod||this.currentUser.defaultPaymentMethod},showPurchaseButton(){return!!this.paymentMethod&&(!("creditcard"===this.paymentMethod&&!this.currentUser.canCheckout)&&Object.keys(_.paymentButtonLabels).includes(this.paymentMethod))},isGoToCreditCard(){return"creditcard"===this.paymentMethod&&!this.currentUser.canCheckout},paymentLabel(){var e=this.$store.state.purchase.currentCreditCardNumber;if(this.currentUser.canCheckout&&"creditcard"===this.paymentMethod&&e){var t=_.paymentLabels[this.paymentMethod];return"".concat(e," (").concat(t,")")}return _.paymentLabels[this.paymentMethod]},showWithFollow(){return!!["note_purchase","magazine_purchase","support"].includes(this.actionType)&&(void 0!==this.contentAuthor.id&&!this.contentAuthor.isFollowing)},disabledFollow(){return this.$store.state.modal.purchaseModalContainer.nextPageDisableFollow},headerText(){return this.isSupport?"チップの確認":"購入の確認"},purchaseButtonName(){return this.isSupport?"チップを送る":"購入する"},isShowPaypayCampaign:A.d,isShowPaypayCampaignLabel(){var e;return this.isShowPaypayCampaign&&(this.isSupport||this.isNotePurchase||this.isMagazinePurchase)&&"paypay"!==this.paymentMethod&&Object(A.c)(null!==(e=this.supportPrice)&&void 0!==e?e:this.contentPrice)}}),mounted(){var e,t,r,n,o;Object(P.c)(this.$tracker,{kind:P.a.cv_purchasing_process,action:"imp",contentType:this.isNotePurchase||this.isSupport?"Note":"Magazine",contentKey:this.isNotePurchase||this.isSupport?null===(e=this.note)||void 0===e?void 0:e.key:null===(t=this.magazine)||void 0===t?void 0:t.key,placeType:this.placeType,purchaseType:this.isSupport?"support":"paid",discountCampaignKind:null===(r=this.discountCampaign)||void 0===r?void 0:r.kind,discountCampaignKey:null===(n=this.discountCampaign)||void 0===n?void 0:n.key,discountCampaignDiscountedPrice:null===(o=this.discountCampaign)||void 0===o?void 0:o.discountedPrice,experiment_info:{}})},methods:{init(){if(this.isSubmitting=!1,void 0!==this.$store.state.modal.purchaseModalContainer.withFollow&&(this.withFollow=this.$store.state.modal.purchaseModalContainer.withFollow),"support"!==this.actionType&&!["creditcard","paypay","amazonpay"].includes(this.paymentMethod)){this.$store.dispatch(f.MODAL_ACTION_TYPES.SET_PURCHASE_MODAL_CONTAINER,{supportPrice:0,supportMessage:""})}},setWithFollow(e){this.withFollow=e},purchase(){var e=this;return Object(n.a)((function*(){e.isSubmitting=!0;var t={returnUrl:"".concat(_.defaultBaseUrl,"/a/purchase/after_purchase")};e.trackFollowCreatorWithSupport(),e.showWithFollow&&e.withFollow&&(yield e.followUser({userId:e.contentAuthor.id,userKey:e.contentAuthor.key,via:"support"===e.actionType?"support_creator":"purchase_content"})),yield e.$_purchaseable_purchase(t),e.isSubmitting=!1}))()},changePaymentMethod(){this.$emit("selectPaymentMethod",{nextPageDisableFollow:this.disabledFollow,withFollow:this.withFollow})},close(){this.$emit("close",{withFollow:this.withFollow})},trackFollowCreatorWithSupport(){this.isSupport&&!this.contentAuthor.isFollowing&&this.$tracker.trackActionLogs([this.$tracker.buildActionLogRecord({kind:"follow-creator-with-support",contents:{follow:this.withFollow}})])}}}),N=r(7),component=Object(N.a)(z,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"max-w-[470px] mx-auto"},[r("div",{staticClass:"p-4 bg-background-secondary"},[r("div",{staticClass:"flex"},[r("div",{staticClass:"absolute"},[r("nt-button",{staticClass:"relative bottom-1",attrs:{size:"small",type:"basic",disabled:e.isSubmitting},on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("\n          戻る\n        ")])],1),e._v(" "),r("div",{staticClass:"flex flex-1 justify-center"},[r("h1",{staticClass:"font-bold"},[e._v("\n          "+e._s(e.headerText)+"\n        ")])])]),e._v(" "),!e.isSupport&&Boolean(e.purchaseCoverKind)?r("div",{staticClass:"p-4 mt-4 bg-background-primary rounded-lg border border-border-default sm:px-6 sm:mt-6"},[r("purchase-cover",{attrs:{kind:e.purchaseCoverKind,title:e.contentName,"author-name":e.contentAuthorName,"content-price":e.contentPrice,"support-price":e.supportPrice,"discounted-price":e.discountedPrice,"discount-campaign-kind":e.discountCampaignKind,note:e.note,magazine:e.magazine}})],1):e._e()]),e._v(" "),r("div",[r("div",{staticClass:"px-4"},[e.isShowPaypayCampaignLabel?r("paypay-campaign-message",{staticClass:"mt-4 -mb-1 py-2 bg-surface-quaternary",attrs:{arrow:"topRight"}}):e._e(),e._v(" "),e.paymentLabel?r("div",{staticClass:"py-4 border-b border-border-default"},[r("div",{staticClass:"flex justify-between items-center"},[r("h3",{staticClass:"text-text-secondary text-sm"},[e._v("\n            お支払い\n          ")]),e._v(" "),r("button",{staticClass:"flex items-center p-0",on:{click:function(t){return e.changePaymentMethod()}}},[r("span",{staticClass:"font-bold text-text-primary text-sm"},[e._v("\n              "+e._s(e.paymentLabel)+"\n            ")]),e._v(" "),r("nt-icon",{staticClass:"ml-2 text-text-clickable",attrs:{type:"navnext",clickable:!0}})],1)])]):e._e(),e._v(" "),e.isSupport||e.supportMessage?r("div",{staticClass:"py-4 border-b border-border-default"},[e.isSupport?r("div",{staticClass:"flex justify-between items-center flex-wrap gap-1 mb-4"},[r("h3",{staticClass:"text-text-secondary text-sm"},[e._v("\n            チップ\n          ")]),e._v(" "),r("nt-currency",{staticClass:"whitespace-nowrap font-bold text-sm",attrs:{amount:e.supportPrice}})],1):e._e(),e._v(" "),e.supportMessage?r("div",{staticClass:"flex flex-col"},[r("h3",{staticClass:"text-text-secondary text-sm"},[e._v("\n            メッセージ\n          ")]),e._v(" "),r("span",{staticClass:"mt-2 font-bold whitespace-pre-line text-sm",attrs:{slot:"body"},domProps:{textContent:e._s(e.supportMessage)},slot:"body"})]):e._e()]):e._e(),e._v(" "),e.showWithFollow&&e.withFollow?r("div",{staticClass:"py-4 border-b border-border-default"},[e._m(0)]):e._e(),e._v(" "),e.apiError?r("div",{staticClass:"py-4 border-b border-border-default"},[r("form-error-list",[r("credit-card-error-message",{attrs:{"error-message":e.toApiErrorMessage(e.apiError)}})],1)],1):e._e(),e._v(" "),r("div",{staticClass:"flex flex-col py-8"},[e.showPurchaseButton?["amazonpay"===e.paymentMethod?r("amazonpay-button",{attrs:{show:!0,variant:"onlyButton"},on:{checkout:e.purchase}}):r("nt-button",{attrs:{disabled:e.isSubmitting,size:"large",width:"fit",type:"primary"},on:{click:function(t){return t.preventDefault(),e.purchase(t)}}},[e._v("\n            "+e._s(e.isSubmitting?"処理中":e.purchaseButtonName)+"\n          ")])]:e.isGoToCreditCard?r("nt-button",{attrs:{size:"large",width:"fit",type:"primary"},on:{click:function(t){return t.preventDefault(),e.$emit("inputCard",{})}}},[e._v("\n          カード情報入力画面へ\n        ")]):r("nt-button",{attrs:{size:"large",width:"fit",type:"primary"},on:{click:function(t){return t.preventDefault(),e.$emit("selectPaymentMethod",{})}}},[e._v("\n          決済方法を選択\n        ")])],2)],1),e._v(" "),!1===e.isSupport?r("div",{staticClass:"flex justify-center"},[r("p",{staticClass:"text-text-secondary text-xs"},[r("nt-link-functional",{staticClass:"underline inline-block hover:text-text-primary lg:transition-all",attrs:{href:"https://help-note.com/hc/ja/articles/6253267645337",target:"_blank"}},[e._v("\n          購入時のご確認\n        ")])],1),e._v(" "),!1===e.canRefund?r("p",{staticClass:"text-text-secondary text-xs ml-4"},[r("nt-link-functional",{staticClass:"underline inline-block hover:text-text-primary lg:transition-all",attrs:{href:"https://help-note.com/hc/ja/articles/360000670602/",target:"_blank"}},[e._v("\n          返金不可\n        ")])],1):e._e(),e._v(" "),r("p",{staticClass:"text-text-secondary text-xs ml-4"},[r("nt-link-functional",{staticClass:"underline inline-block hover:text-text-primary lg:transition-all",attrs:{href:"https://help-note.com/hc/ja/articles/360009035473",target:"_blank"}},[e._v("\n          チップとは\n        ")])],1)]):e._e()])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex justify-between items-center"},[r("h3",{staticClass:"text-text-secondary text-sm"},[e._v("\n            クリエイターをフォロー\n          ")]),e._v(" "),r("span",{staticClass:"font-bold text-sm"},[e._v(" フォローする ")])])}],!1,null,null,null);t.a=component.exports},4416:function(e,t,r){"use strict";r(18),r(19),r(28),r(593);var n=r(1),o=r(54),l=r(375),c=r(3155),d=r(43),h=r(3126),m=r(4048),v=r(3143),_=r(61),f=r(57),y=r(3304),C=r(4051),x=r(3973),M={note_purchase:{amazonpay:{isAvailable:!0,order:1},paypay:{isAvailable:!0,order:2},creditcard:{isAvailable:!0,order:3},carrier:{isAvailable:!0,order:4},paypal:{isAvailable:!0,order:5}},magazine_purchase:{amazonpay:{isAvailable:!0,order:1},paypay:{isAvailable:!0,order:2},creditcard:{isAvailable:!0,order:3},carrier:{isAvailable:!0,order:4},paypal:{isAvailable:!0,order:5}},magazine_subscribe:{creditcard:{isAvailable:!0,order:1},carrier:{isAvailable:!0,order:2},paypay:{isAvailable:!1},paypal:{isAvailable:!1},amazonpay:{isAvailable:!1}},support:{paypay:{isAvailable:!0,order:1},creditcard:{isAvailable:!0,order:2},carrier:{isAvailable:!0,order:3},paypal:{isAvailable:!1},amazonpay:{isAvailable:!1}}},w=n.a.extend({components:{NtButton:d.a,PaypayCouponLabel:m.default,AmazonpayCampaignLabel:C.a,PaymentMethodAccordionSelector:x.default},mixins:[o.a,l.a,c.a],props:{isModal:{type:Boolean,default:!1},placeType:{type:String,default:"purchase-payment-method-modal"},creditCardNumberForEdit:{type:String,default:void 0}},data(){var e;return{paymentMethod:"",carrierPaymentMethod:x.PAYMENT_METHOD_CARRIER_CATALOG.Docomo,monthlyCarrierPaymentMethod:x.PAYMENT_METHOD_CARRIER_MONTHLY_CATALOG.MonthlyDocomo,isSelectedPaymentMethodAsDefault:null===(e=this.$store.state.modal.purchaseModalContainer.willSetPaymentMethodAsDefault)||void 0===e||e}},computed:Object.assign(Object.assign({},Object(_.c)({finalNotePrice:f.PURCHASE_GETTER_TYPES.FINAL_NOTE_PRICE})),{PAYMENT_METHOD_CATALOG:()=>x.PAYMENT_METHOD_CATALOG,paymentMethodConfig(){var e=M[this.actionType];return e.hasOwnProperty(x.PAYMENT_METHOD_CATALOG.Amazonpay)&&!1===this.isAmazonpayEnabled&&delete e[x.PAYMENT_METHOD_CATALOG.Amazonpay],e},availablePaymentMethods(){return Object.keys(this.paymentMethodConfig).filter((e=>this.paymentMethodConfig[e].isAvailable))},canUsePoint(){return this.actionType===x.PURCHASING_TYPE_CATALOG.NotePurchase},isDefaultMarkingSwitchShown(){return x.ONETIME_PURCHASING_TYPES.includes(this.actionType)},isCreditCardRegistrationNeeded(){return this.paymentMethod===x.PAYMENT_METHOD_CATALOG.Creditcard&&!this.currentUser.canCheckout},isGoToConfirm(){return this.paymentMethod===x.PAYMENT_METHOD_CATALOG.Creditcard&&this.currentUser.canCheckout||this.availablePaymentMethods.includes(this.paymentMethod)},actionType(){return this.$store.state.modal.purchaseModalContainer.actionType||this.$route.query.at},withSupport(){return this.$store.state.modal.purchaseModalContainer.withSupport},initialPaymentMethod(){var e,t=(()=>{var e=this.$store.state.modal.purchaseModalContainer.paymentMethod||this.currentUser.defaultPaymentMethod;if(e!==x.PAYMENT_METHOD_CATALOG.Creditcard||this.currentUser.canCheckout)return x.ALL_CARRIER_PAYMENT_METHODS.includes(e)?(this.carrierPaymentMethod=e,x.PAYMENT_METHOD_CATALOG.Carrier):e})();return this.availablePaymentMethods.includes(t)?t:null!==(e=this.availablePaymentMethods[0])&&void 0!==e?e:void 0},defaultPaymentMethod(){return this.currentUser.defaultPaymentMethod!==x.PAYMENT_METHOD_CATALOG.Creditcard||this.currentUser.canCheckout?this.currentUser.defaultPaymentMethod:null},isAmazonpayEnabled(){return Object(y.c)(this)},isCarrierMonthly(){return this.actionType===x.PURCHASING_TYPE_CATALOG.MagazineSubscribe},isPaypayCampaignShown:v.d,isPaypayCampaignLabelShown(){var e=0;switch(this.actionType){case x.PURCHASING_TYPE_CATALOG.NotePurchase:e=this.finalNotePrice;break;case x.PURCHASING_TYPE_CATALOG.MagazinePurchase:e=this.$store.state.purchase.magazine.price;break;case x.PURCHASING_TYPE_CATALOG.Support:e=this.$store.state.modal.purchaseModalContainer.supportPrice;break;default:return!1}return this.isPaypayCampaignShown&&Object(v.c)(e)},pointsToUse(){return this.$store.state.purchase.pointsToUse},isAmazonpayCampaignShown(){return Object(y.d)(this)&&Object(y.e)(this.finalNotePrice)},canPayWithPointOnly(){var e;if(this.$_purchaseable_actionType!==x.PURCHASING_TYPE_CATALOG.NotePurchase)return!1;var t=null!==(e=this.$_purchaseable_discountedPrice)&&void 0!==e?e:this.$_purchaseable_contentPrice;return this.$_purchaseable_pointBalance.total>=t},isDefaultPaymentInvalidAmazonPay(){return!this.$store.state.modal.purchaseModalContainer.paymentMethod&&this.currentUser.defaultPaymentMethod===x.PAYMENT_METHOD_CATALOG.Amazonpay&&!Object(y.c)(this)}}),mounted(){Object(h.c)(this.$tracker,{kind:h.a.cv_purchasing_process,action:"imp",placeType:this.placeType,capabilities:{amazonPay:Object(y.a)(this),guestAmazonpay:Object(y.b)(this),isInAmazonpayCampaign:Object(y.d)(this)}}),this.defaultPaymentMethod||(this.isSelectedPaymentMethodAsDefault=!0)},methods:{handleCreditCardRegistration(){window.history.pushState({},""),this.$emit("inputCard",{willSetPaymentMethodAsDefault:this.isSelectedPaymentMethodAsDefault})},handleSelect(e){switch(this.actionType){case x.PURCHASING_TYPE_CATALOG.NotePurchase:case x.PURCHASING_TYPE_CATALOG.MagazinePurchase:case x.PURCHASING_TYPE_CATALOG.Support:this.carrierPaymentMethod=e.carrierPaymentMethod;break;case x.PURCHASING_TYPE_CATALOG.MagazineSubscribe:this.monthlyCarrierPaymentMethod=e.carrierPaymentMethod}if(this.isSelectedPaymentMethodAsDefault=e.markAsDefault,x.ONETIME_PURCHASING_TYPES.includes(this.actionType)){var t=this.paymentMethod===x.PAYMENT_METHOD_CATALOG.Carrier,r=this.pointsToUse>0,n=this.paymentMethod===x.PAYMENT_METHOD_CATALOG.Paypal,o=t||r||n;this.$emit("moveToPurchaseOneshotContent",{withSupport:!o&&this.withSupport,paymentMethod:this.paymentMethod===x.PAYMENT_METHOD_CATALOG.Carrier?this.carrierPaymentMethod:this.paymentMethod,willSetPaymentMethodAsDefault:this.isSelectedPaymentMethodAsDefault,via:"purchasePaymentMethod"})}else this.actionType===x.PURCHASING_TYPE_CATALOG.MagazineSubscribe?this.$emit("moveToPurchaseSubscribeMagazine",{paymentMethod:this.paymentMethod===x.PAYMENT_METHOD_CATALOG.Carrier?this.monthlyCarrierPaymentMethod:this.paymentMethod,via:"purchasePaymentMethod"}):this.$emit("confirm",{paymentMethod:this.paymentMethod===x.PAYMENT_METHOD_CATALOG.Carrier?this.carrierPaymentMethod:this.paymentMethod})},resetData(){var e=this.initialPaymentMethod;this.paymentMethod=(()=>x.ONETIME_PURCHASING_TYPES.includes(this.actionType)&&!1===Boolean(e)&&Object(y.c)(this)?x.PAYMENT_METHOD_CATALOG.Amazonpay:e)(),this.carrierPaymentMethod=e===x.PAYMENT_METHOD_CATALOG.Carrier?this.$store.state.modal.purchaseModalContainer.paymentMethod:x.PAYMENT_METHOD_CARRIER_CATALOG.Docomo},back(){if(x.ONETIME_PURCHASING_TYPES.includes(this.actionType)){if(null===this.defaultPaymentMethod||this.isDefaultPaymentInvalidAmazonPay||null===this.initialPaymentMethod&&!1===this.canPayWithPointOnly)return void this.moveToContentPath();this.$emit("moveToPurchaseOneshotContent",{via:"purchasePaymentMethod"})}else this.actionType===x.PURCHASING_TYPE_CATALOG.MagazineSubscribe?this.$emit("moveToPurchaseSubscribeMagazine",{via:"purchasePaymentMethod"}):this.$emit("confirm",{})}}}),P=r(7),component=Object(P.a)(w,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"max-w-[470px] mx-auto"},[r("header",{staticClass:"p-4 relative",attrs:{focusable:"false"}},[r("nt-button",{staticClass:"relative z-10",attrs:{type:"basic",size:"small"},on:{click:function(t){return e.back()}}},[e._v("\n      戻る\n    ")]),e._v(" "),r("h1",{staticClass:"font-bold text-md text-center absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",attrs:{tabindex:"0"}},[e._v("\n      お支払い方法\n    ")])],1),e._v(" "),r("payment-method-accordion-selector",{attrs:{"available-payment-methods":e.paymentMethodConfig,"default-payment-method":e.defaultPaymentMethod,"initial-mark-as-default":e.isSelectedPaymentMethodAsDefault,"selected-payment-method":e.initialPaymentMethod,"selected-carrier-payment-method":e.carrierPaymentMethod,"is-credit-card-registration-needed":e.isCreditCardRegistrationNeeded,"is-default-marking-switch-shown":e.isDefaultMarkingSwitchShown,"is-carrier-monthly":e.isCarrierMonthly,"credit-card-number-for-edit":e.creditCardNumberForEdit},on:{change:function(t){e.paymentMethod=t},"change-mark-as-default":function(t){e.isSelectedPaymentMethodAsDefault=t},submit:e.handleSelect,"credit-card-registration":e.handleCreditCardRegistration},scopedSlots:e._u([{key:"belowEach",fn:function(t){var n=t.currentPaymentMethod;return[n===e.PAYMENT_METHOD_CATALOG.Amazonpay&&e.isAmazonpayCampaignShown?r("div",{staticClass:"mx-4 pb-4"},[r("amazonpay-campaign-label",{attrs:{arrow:"topRight"}})],1):e._e(),e._v(" "),n===e.PAYMENT_METHOD_CATALOG.Paypay&&e.isPaypayCampaignLabelShown?r("div",{staticClass:"mx-4 pb-4"},[r("paypay-coupon-label",{staticClass:" !bg-surface-normal text-center text-xs border border-border-default rounded-lg",attrs:{arrow:"topRight","container-bg-class-name":"bg-surface-normal"}})],1):e._e()]}}])})],1)}),[],!1,null,null,null);t.a=component.exports},4419:function(e,t,r){"use strict";var n=r(0),o=(r(11),r(141),r(142),r(143),r(144),r(145),r(146),r(147),r(148),r(149),r(150),r(151),r(152),r(153),r(12),r(30),r(1)),l=r(192),c=r(83),d=r(156),h=r(251),m=r(413),v=r(43),_=r(191),f=r(4052),y=r(10),C=r(4009),x=r(54),M=r(3126),w=r(194),P=r(249),S=r(376),k=r(34),circle=r(46),T=r(57),A=r(44),z=r(88),N=new Map([["s100","bg_support_01.png"],["s500","bg_support_02.png"],["s1000","bg_support_03.png"],["sfree","bg_support_04.png"]]),E=o.a.extend({components:{FormCheckbox:w.a,Avatar:l.default,FormErrorList:c.a,FormGroup:d.a,FormTextarea:h.a,InputCount:m.a,NtButton:v.a,NtLinkFunctional:_.default,SupportSelectPrice:f.a,NtIcon:k.default,NtLink:A.default},mixins:[C.a,x.a,P.a],props:{isModal:{type:Boolean,default:!1},placeType:{type:String,default:"purchase-support-modal"}},computed:{config:()=>y,creator(){return this.$store.state.purchase.note?this.$store.state.purchase.note.user:null},hasMembership(){return!!this.$store.state.purchase.note&&this.$store.state.purchase.note.isPublicMembershipConnected},userProfileImagePath(){return new S.a(this.creator.userProfileImagePath).size(56).dpr().toString()},supportAppealText(){var e;return null!==(e=this.creator.supportBoxAppealText)&&void 0!==e?e:""},currentSupportBackground(){var e,t=(null===(e=this.currentSupport)||void 0===e?void 0:e.kind)||y.support.defaultKind,n=N.get(t),o=n?r(4135)("./".concat(n)):"";return{"background-image":o?"url(".concat(o,")"):"none"}},planSelectText(){var e=this.$store.getters[T.PURCHASE_GETTER_TYPES.MIN_PLAN_PRICE],t="(".concat(e,"円/月〜)");return"プランを選択 ".concat(e?t:"")},membershipPath(){return"".concat(this.$path.contentPath({contentType:"membership",content:this.creator}),"/join")},contentAuthor(){return this.$store.state.purchase.creator},priceValidateMessage(){var e=Object(z.number)(y.support.minPrice),t=Object(z.number)(y.support.maxPrice);return"".concat(e,"円から").concat(t,"円の間で入力してください。")}},mounted(){var e,t;Object(M.c)(this.$tracker,{kind:M.a.cv_purchasing_process,action:"imp",contentType:"Note",contentKey:null===(e=this.$store.state.purchase.note)||void 0===e?void 0:e.key,placeType:this.placeType,purchaseType:"support"}),this.hasMembership&&this.$tracker.trackActionLogs([this.$tracker.buildActionLogRecord({kind:"membership-support-imp",contents:{creatorUrlname:this.creator.urlname,noteKey:null===(t=this.$store.state.purchase.note)||void 0===t?void 0:t.key}})])},methods:{decide(){if(this.$v.$touch(),!this.$v.$invalid){var{defaultPaymentMethod:e}=this.currentUser,t="paypal"!==e&&"amazonpay"!==e?e:null;this.$emit("decide",{actionType:"support",supportPrice:Number(this.currentSupport.price),supportMessage:this.supportMessage,paymentMethod:t,withFollow:this.withFollow})}},init(){var e=this;return Object(n.a)((function*(){e.supportMessage="",e.$v.$reset(),e.hasMembership&&(yield e.fetchMembershipPlans())}))()},close(){this.$emit("close")},onChangeWithFollow(e){this.withFollow=e},fetchMembershipPlans(){var e=this;return Object(n.a)((function*(){var{data:data}=yield Object(circle.f)(e.$axios,e.creator.urlname);e.$store.dispatch(T.PURCHASE_ACTION_TYPES.SET_CIRCLE_PLANS,data.circlePlans)}))()},trackClickLog(){var e;this.$tracker.trackActionLogs([this.$tracker.buildActionLogRecord({kind:"membership-support-click",contents:{creatorUrlname:this.creator.urlname,noteKey:null===(e=this.$store.state.purchase.note)||void 0===e?void 0:e.key}})])}}}),$=(r(4136),r(7)),component=Object($.a)(E,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-purchaseSupport"},[r("section",{staticClass:"m-purchaseSupport__body"},[r("div",{staticClass:"m-purchaseSupport__cover",style:e.currentSupportBackground},[""!==e.supportAppealText?r("div",{staticClass:"m-purchaseSupport__balloon"},[r("div",{staticClass:"m-purchaseSupport__balloonInner"},[e._v("\n          "+e._s(e.supportAppealText)+"\n        ")])]):e._e(),e._v(" "),r("figure",{staticClass:"m-purchaseSupport__avatar"},[r("avatar",{attrs:{src:e.userProfileImagePath,size:"large"}})],1),e._v(" "),r("h1",{staticClass:"m-purchaseSupport__title"},[e._v("\n        "+e._s(e.creator.nickname||e.creator.urlname)+" さんにチップを送る\n      ")])]),e._v(" "),r("div",{staticClass:"m-purchaseSupport__inner"},[e.hasMembership?r("section",{staticClass:"m-purchaseSupport__item"},[r("h3",{staticClass:"mb-2 text-sm font-bold"},[e._v("\n          メンバーシップで定期的に応援する\n        ")]),e._v(" "),r("nt-link",{attrs:{href:e.membershipPath,"is-button-link":!0,"button-type":"basic","button-width":"fit",target:"_blank"},nativeOn:{click:function(t){return e.trackClickLog(t)}}},[e._v("\n          "+e._s(e.planSelectText)+"\n        ")])],1):e._e(),e._v(" "),r("div",{staticClass:"m-purchaseSupport__item"},[r("nt-link-functional",{staticClass:"m-purchaseSupport__help",attrs:{href:e.$path.staticPath("https://help-note.com/hc/ja/articles/360009035473"),target:"_blank"}},[r("span",{staticClass:"m-purchaseSupport__helpText"},[e._v("チップとは")]),e._v(" "),r("nt-icon",{attrs:{type:"help",clickable:!1,size:"small"}})],1),e._v(" "),r("form-group",{attrs:{label:"金額"}},[r("support-select-price",{model:{value:e.currentSupport,callback:function(t){e.currentSupport=t},expression:"currentSupport"}}),e._v(" "),r("form-error-list",{directives:[{name:"show",rawName:"v-show",value:e.$v.currentSupport.price.$error,expression:"$v.currentSupport.price.$error"}],attrs:{slot:"errorMessage"},slot:"errorMessage"},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.$v.currentSupport.price.required,expression:"!$v.currentSupport.price.required"}]},[e._v("\n              金額は必須です。\n            ")]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.$v.currentSupport.price.range,expression:"!$v.currentSupport.price.range"}]},[e._v("\n              "+e._s(e.priceValidateMessage)+"\n            ")])])],1)],1),e._v(" "),r("div",{staticClass:"m-purchaseSupport__item"},[r("form-textarea",{attrs:{id:"message",placeholder:e.messagePlaceholder,"has-error":e.$v.supportMessage.$error,label:"メッセージ"},model:{value:e.supportMessage,callback:function(t){e.supportMessage=t},expression:"supportMessage"}},[r("form-error-list",{directives:[{name:"show",rawName:"v-show",value:e.$v.supportMessage.$error,expression:"$v.supportMessage.$error"}],attrs:{slot:"errorMessage"},slot:"errorMessage"},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.$v.supportMessage.maxLength,expression:"!$v.supportMessage.maxLength"}]},[e._v("\n              "+e._s(e.config.support.maxMessageNum)+"文字以内で入力してください。\n            ")])])],1),e._v(" "),r("input-count",{attrs:{length:e.supportMessage.length,"max-length":e.config.support.maxMessageNum}})],1),e._v(" "),e.creator.isFollowing?e._e():r("div",{staticClass:"m-purchaseSupport__item"},[r("form-checkbox",{attrs:{id:"follow",checked:e.withFollow,value:!0,label:"クリエイターをフォロー"},on:{input:e.onChangeWithFollow}})],1)])]),e._v(" "),r("div",{staticClass:"m-purchaseSupport__footer"},[r("nt-button",{attrs:{size:"large",width:"fit",type:"primary"},on:{click:function(t){return t.preventDefault(),e.decide(t)}}},[e._v("\n      確認\n    ")]),e._v(" "),r("nt-button",{staticClass:"mt-3",attrs:{width:"fit",type:"basic"},on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("\n      キャンセル\n    ")])],1)])}),[],!1,null,"24543211",null);t.a=component.exports},4422:function(e,t,r){"use strict";var n=r(0),o=(r(14),r(74),r(30),r(18),r(1)),l=r(45),c=r(10),d=r(43),h=r(34),m=r(191),v=r(248),_=r(83),f=r(113),y=r(193),C=r(54),x=r(33),M=o.a.extend({components:{FormErrorList:_.a,FormInput:f.a,NtButton:d.a,NtLinkFunctional:m.default,NtSvgIcon:v.default,NtIcon:h.default},mixins:[C.a,y.a],props:{isModal:{type:Boolean,default:!1},registerCompleted:{type:Boolean,default:!1},inCampaignPeriod:{type:Boolean,default:!1},campaignPromotionalText:{type:String,default:""}},validations:{password:{required:l.required,minLength:Object(l.minLength)(c.user.password.minLength),maxLength:Object(l.maxLength)(c.user.password.maxLength),pattern:e=>RegExp("^[!-~]+$").test(e)}},data:()=>({password:"",isSubmitting:!1,apiErrorMsgForUrlname:"",showPassword:!1}),computed:{note(){return this.$store.state.purchase.note},guest(){return this.$store.state.purchase.guest},actionType(){return this.$store.state.modal.purchaseModalContainer.actionType},guestAuthorizationNumber(){return this.$store.state.modal.purchaseModalContainer.guestAuthorizationNumber},disabledSubmitBtn(){var e=this.isSubmitting||this.$v.$anyError,t=!this.password||this.password.length<this.$v.password.$params.minLength.min;return e||t},passwordEyeLabel(){return this.showPassword?"パスワードを非表示にします":"パスワードを表示します"},passwordMinLength(){return this.$v.password.$params.minLength.min},passwordMaxLength(){return this.$v.password.$params.maxLength.max},title(){return"note_lead_form"===this.actionType?"完了しました":"購入が完了しました"}},methods:{init(){var e;Object.assign(null!==(e=this.$data)&&void 0!==e?e:{},{password:"",isSubmitting:!1,apiErrorMsgForUrlname:"",showPassword:!1}),this.sendPaywallLog(this.note.id,"Note",this.note.user.id)},register(){var e=this;return Object(n.a)((function*(){if(e.$v.$touch(),!e.$v.$invalid){e.isSubmitting=!0;try{var t=yield e.$store.dispatch(x.USER_ACTION_TYPES.SIGNUP,{email:e.guest.mail,card:e.guest.card,password:e.password,via:"after_guest_purchase"});e.handleSignupResponse(t)}catch(t){alert(e.toApiErrorMessage(t.response))}e.isSubmitting=!1}}))()},handleSignupResponse(e){e.error?alert(this.toApiErrorMessage(e.error)):this.$emit("after-register")},handleAfterSignup(){this.$emit("close-after-signup")},sendPaywallLog(e,t,r){this.$tracker.trackActionLogs([this.$tracker.buildActionLogRecord({kind:"note-detail-paywall-finish",contents:{target_id:e,target_type:t,creator_user_id:r,is_logged_in:this.isLoggedIn,experiment_info:{}}})]),this.$tracker.trackActionLogs([this.$tracker.buildActionLogRecord({kind:"guest-note-detail-paywall-finish",contents:{target_id:e,target_type:t,creator_user_id:r,is_logged_in:this.isLoggedIn}})])}}}),w=(r(4150),r(4152),r(7)),component=Object(w.a)(M,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-purchaseNoteGuestComplete"},[r("div",{staticClass:"m-purchaseNoteGuestComplete__header"},[r("div",{staticClass:"m-purchaseNoteGuestComplete__headerIcon"},[r("nt-svg-icon",{staticClass:"text-text-success",attrs:{type:"checkCircle",size:"xlarge"}})],1),e._v(" "),r("h1",[e._v(e._s(e.title))])]),e._v(" "),r("div",{staticClass:"m-purchaseNoteGuestComplete__thanks"},[r("div",{staticClass:"m-purchaseNoteGuestComplete__thanksHeader"},[e._v("\n      購入した記事はメールで読むことができます。"),r("br"),e._v(" "),r("b",[e._v(e._s(e.guest.mail))]),e._v(" をご確認ください。\n    ")]),e._v(" "),r("div",{staticClass:"m-purchaseNoteGuestComplete__thanksCaution"},[r("p",{staticClass:"m-purchaseNoteGuestComplete__thanksCautionTitle"},[r("nt-icon",{attrs:{clickable:!1,type:"warning",size:"small"}}),e._v("メールが届かない場合\n      ")],1),e._v(" "),"note_lead_form"!==e.actionType?r("div",{staticClass:"m-purchaseNoteGuestComplete__thanksNum"},[e._v("\n        オーダー番号 : "),r("span",{staticClass:"m-purchaseNoteGuestComplete__thanksNum__number"},[e._v(e._s(e.guestAuthorizationNumber))]),r("br")]):e._e(),e._v(" "),"note_lead_form"===e.actionType?r("p",{staticClass:"m-purchaseNoteGuestComplete__thanksCautionMessage"},[e._v("\n        メールが届いていない場合、"),r("span",[e._v("メールアドレス")]),e._v("を控えた上で"),r("nt-link-functional",{staticClass:"m-purchaseNoteGuestComplete__thanksCautionLink",attrs:{href:"https://www.help-note.com/hc/ja/articles/23680335601817",target:"_blank"}},[e._v("\n          対処法をご確認ください。\n        ")])],1):r("p",{staticClass:"m-purchaseNoteGuestComplete__thanksCautionMessage"},[e._v("\n        オーダー番号を控えた上で"),r("nt-link-functional",{staticClass:"m-purchaseNoteGuestComplete__thanksCautionLink",attrs:{href:"https://www.help-note.com/hc/ja/articles/4402447583001-%E4%BC%9A%E5%93%A1%E7%99%BB%E9%8C%B2%E3%82%92%E3%81%9B%E3%81%9A%E3%81%AB-%E3%81%9D%E3%81%AE%E3%81%BE%E3%81%BE%E8%B3%BC%E5%85%A5-%E3%81%97%E3%81%9F%E3%81%8C%E3%83%A1%E3%83%BC%E3%83%AB%E3%81%8C%E5%B1%8A%E3%81%8B%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AE%E5%AF%BE%E5%87%A6%E6%B3%95",target:"_blank"}},[e._v("\n          対処方法"),r("nt-svg-icon",{attrs:{clickable:!0,type:"openInNew",size:"xsmall"}})],1),e._v("をご参照ください。\n      ")],1),e._v(" "),r("p",{staticClass:"m-purchaseNoteGuestComplete__thanksCautionMessage"},[e._v("\n        または、以下から会員登録をすると購入した記事をお読みいただけるようになります。\n      ")])])]),e._v(" "),r("section",{staticClass:"m-purchaseNoteGuestComplete__signup"},[r("h1",{staticClass:"m-purchaseNoteGuestComplete__signupTitle"},[e._v("\n      パスワードを入れてこのまま会員登録\n    ")]),e._v(" "),r("p",{staticClass:"m-purchaseNoteGuestComplete__signupDescription"},[e._v("\n      購入した記事を、アプリやウェブでいつでも読めるようになります。\n    ")]),e._v(" "),e.inCampaignPeriod&&e.campaignPromotionalText?r("p",{staticClass:"m-purchaseNoteGuestComplete__campaignPromotionalText"},[e._v("\n      "+e._s(e.campaignPromotionalText)+"\n    ")]):e._e(),e._v(" "),r("div",{staticClass:"m-purchaseNoteGuestComplete__signupItem"},[r("form-input",{attrs:{id:"password","has-error":e.$v.password.$error,type:e.showPassword?"text":"password",label:"パスワード",placeholder:""},on:{blur:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},[r("button",{staticClass:"m-purchaseNoteGuestComplete__signupItem__eye",attrs:{slot:"item",type:"button","aria-label":e.passwordEyeLabel,"data-tooltip":e.passwordEyeLabel},on:{click:function(t){e.showPassword=!e.showPassword}},slot:"item"},[r("nt-icon",{attrs:{clickable:!1,type:e.showPassword?"view":"viewOff",size:"medium"}})],1),e._v(" "),r("form-error-list",{directives:[{name:"show",rawName:"v-show",value:e.$v.password.$error,expression:"$v.password.$error"}],attrs:{slot:"errorMessage"},slot:"errorMessage"},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.$v.password.required,expression:"!$v.password.required"}]},[e._v("\n            パスワードは入力必須です。\n          ")]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.$v.password.minLength,expression:"!$v.password.minLength"}]},[e._v("\n            "+e._s(e.passwordMinLength)+" 文字以上で入力してください。\n          ")]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.$v.password.maxLength,expression:"!$v.password.maxLength"}]},[e._v("\n            "+e._s(e.passwordMaxLength)+" 文字以内で入力してください。\n          ")]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.$v.password.pattern,expression:"!$v.password.pattern"}]},[e._v("\n            パスワードは半角英数記号を入力してください。\n          ")])])],1),e._v(" "),r("p",{staticClass:"m-purchaseNoteGuestComplete__signupItem__description",attrs:{slot:"description"},slot:"description"},[e._v("\n        "+e._s(e.passwordMinLength)+"文字以上の半角英数記号\n      ")])],1),e._v(" "),r("div",{staticClass:"m-purchaseNoteGuestComplete__signupItem"},[r("nt-button",{attrs:{disabled:e.disabledSubmitBtn,type:"primary",size:"medium",width:"fit"},on:{click:function(t){return e.register()}}},[e._v("\n        利用規約に同意して登録\n      ")])],1),e._v(" "),r("div",{staticClass:"m-purchaseNoteGuestComplete__signupItem m-purchaseNoteGuestComplete__attention"},[e._v("\n      会員登録には、"),r("nt-link-functional",{staticClass:"m-purchaseNoteGuestComplete__termsLink",attrs:{href:e.$path.termsPath(),target:"_blank"}},[r("span",[e._v("利用規約")])]),e._v("\n      と\n      "),r("nt-link-functional",{staticClass:"m-purchaseNoteGuestComplete__privacyPolicyLink",attrs:{href:"https://terms.help-note.com/hc/ja/articles/44948981050649",target:"_blank"}},[r("span",[e._v("プライバシーポリシー")])]),e._v("\n      への同意が必要です。\n    ")],1)])])}),[],!1,null,"fddade08",null);t.a=component.exports},4423:function(e,t,r){"use strict";var n=r(0),o=(r(18),r(14),r(29),r(19),r(28),r(17)),l=r(61),c=r(43),d=r(34),h=r(191),m=r(83),v=r(3674),_=r(57),f=r(3),y=r(193),C=r(98),x=r(10),M=r(3304),w={creditcard:"クレジットカード",paypay:"PayPay"},P={components:{NtButton:c.a,NtIcon:d.default,NtLinkFunctional:h.default,FormErrorList:m.a,PurchaseCover:v.a},mixins:[y.a],props:{isModal:{type:Boolean,default:!1}},data:()=>({isSubmitting:!1}),computed:Object.assign(Object.assign({},Object(l.c)({coverUrl:Object(_.purchaseGetter)("COVER_URL"),discountCampaign:_.PURCHASE_GETTER_TYPES.DISCOUNT_CAMPAIGN})),{note(){return this.$store.state.purchase.note},guest(){return this.$store.state.purchase.guest},errored(){return this.$store.state.purchase.errored},successed(){return this.$store.state.purchase.successed},mail(){var e=this.guest.mail;return e.length>32?"".concat(e.substring(0,32),"…"):e},discountedPrice(){var e;return null===(e=this.discountCampaign)||void 0===e?void 0:e.discountedPrice},discountCampaignKind(){var e;return null===(e=this.discountCampaign)||void 0===e?void 0:e.kind},paymentMethodHuman(){var{guest:e}=this;return"string"==typeof e.paymentDescriptor&&e.paymentDescriptor.length>0?e.paymentDescriptor.replace(/\+/g," "):Object.assign(Object.assign({},w),Object(M.c)(this)?{amazonpay:"Amazon Pay"}:{})[e.paymentMethod]}}),mounted(){this.$store.dispatch(Object(_.purchaseAction)("RESET_ERROR"))},methods:{init(){Object(C.f)(x.gmo.tokenScript,!1),this.isSubmitting=!1,this.$store.dispatch(Object(_.purchaseAction)("RESET_ERROR"))},purchase(){var e=this;return Object(n.a)((function*(){var t,r,n;(e.isSubmitting=!0,yield e.$store.dispatch(Object(_.purchaseAction)("PURCHASE_NOTE_FOR_GUEST")),yield e.$store.dispatch(Object(_.purchaseAction)("SET_CAMPAIGN_STATUS")),e.isSubmitting=!1,e.errored)?(null!==(n=null===(r=null===(t=e.errored.data)||void 0===t?void 0:t.error)||void 0===r?void 0:r.message)&&void 0!==n?n:"").includes("登録済みのメールアドレス")&&e.$tracker.trackActionLogs([e.$tracker.buildActionLogRecordV2({event:"imp",target:"guest_purchasing_email_error"})]):(e.$store.dispatch(Object(f.modalAction)("SET_PURCHASE_MODAL_CONTAINER"),{guestAuthorizationNumber:e.successed.authorizationNumber}),e.$emit("after-purchase"))}))()},closeModal(){o.q.remove("note-detail-paywall-click"),this.$emit("close")},handleEmailClick(){Object(M.c)(this)&&"amazonpay"===this.guest.paymentMethod?this.$router.push({path:"/a/purchase/guest/amazonpay_email",query:this.$route.query}):this.$emit("input-card")}}},S=r(7),component=Object(S.a)(P,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"max-w-[470px] mx-auto"},[r("div",{staticClass:"p-4 bg-background-secondary"},[r("div",{staticClass:"flex"},[r("div",{staticClass:"absolute"},[r("nt-button",{staticClass:"relative bottom-1",attrs:{disabled:e.isSubmitting,type:"basic",size:"small"},on:{click:function(t){return t.preventDefault(),e.closeModal()}}},[e._v("\n          キャンセル\n        ")])],1),e._v(" "),e._m(0)]),e._v(" "),r("div",{staticClass:"p-4 mt-4 bg-background-primary rounded-lg border border-border-default sm:px-6 sm:mt-6"},[r("purchase-cover",{attrs:{kind:"note","image-url":e.coverUrl,title:e.note.name,"author-name":e.note.user.nickname||e.note.user.urlname,"content-price":e.note.price,"discounted-price":e.discountedPrice,"discount-campaign-kind":e.discountCampaignKind,note:e.note}})],1)]),e._v(" "),r("div",{staticClass:"px-4"},[r("div",{staticClass:"py-4 border-b border-border-default"},[r("div",{staticClass:"flex justify-between items-center"},[r("h3",{staticClass:"text-text-secondary text-sm"},[e._v("\n          お支払い\n        ")]),e._v(" "),r("button",{staticClass:"flex items-center p-0",on:{click:function(t){return e.$emit("input-card")}}},[r("span",{staticClass:"font-bold text-text-primary text-sm"},[e._v("\n            "+e._s(e.paymentMethodHuman)+"\n          ")]),e._v(" "),r("nt-icon",{staticClass:"ml-2 text-text-clickable",attrs:{type:"navnext",clickable:!0}})],1)])]),e._v(" "),r("div",{staticClass:"py-4 border-b border-border-default"},[r("div",{staticClass:"flex justify-between items-center"},[r("h3",{staticClass:"text-text-secondary text-sm"},[e._v("\n          メールアドレス\n        ")]),e._v(" "),r("button",{staticClass:"flex items-center p-0",on:{click:e.handleEmailClick}},[r("span",{staticClass:"font-bold text-text-primary text-sm break-all"},[e._v("\n            "+e._s(e.mail)+"\n          ")]),e._v(" "),r("nt-icon",{staticClass:"ml-2 text-text-clickable",attrs:{type:"navnext",clickable:!0}})],1)])]),e._v(" "),e.errored?r("form-error-list",{staticClass:"m-purchaseNoteGuestConfirm__item"},[r("div",[e._v(e._s(e.toApiErrorMessage(e.errored)))])]):e._e(),e._v(" "),r("div",{staticClass:"flex flex-col py-8"},[r("nt-button",{attrs:{disabled:e.isSubmitting,size:"large",width:"fit",type:"primary"},on:{click:function(t){return e.purchase()}}},[e._v("\n        購入する\n      ")])],1)],1),e._v(" "),r("div",{staticClass:"flex justify-center"},[r("p",{staticClass:"text-text-secondary text-xs mr-2"},[r("nt-link-functional",{staticClass:"underline inline-block ml-1 hover:text-text-primary lg:transition-all",attrs:{href:"https://help-note.com/hc/ja/articles/6253267645337",target:"_blank"}},[e._v("\n        購入時のご確認\n      ")])],1),e._v(" "),r("p",{staticClass:"text-text-secondary text-xs"},[r("nt-link-functional",{staticClass:"underline inline-block ml-1 hover:text-text-primary lg:transition-all",attrs:{href:"https://help-note.com/hc/ja/articles/360000670602/",target:"_blank"}},[e._v("\n        返金不可\n      ")])],1)])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-1 justify-center"},[r("h1",{staticClass:"font-bold"},[e._v("\n          購入の確認\n        ")])])}],!1,null,null,null);t.a=component.exports},4755:function(e,t,r){var content=r(5840);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("77e66e84",content,!0,{sourceMap:!1})},4756:function(e,t,r){var content=r(5842);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("400d2a2b",content,!0,{sourceMap:!1})},5839:function(e,t,r){"use strict";r(4755)},5840:function(e,t,r){var n=r(15)((function(i){return i[1]}));n.push([e.i,".o-purchaseNoteFlowChoiceModal[data-v-551c67fe]{padding:40px}.o-purchaseNoteFlowChoiceModal__item+.o-purchaseNoteFlowChoiceModal__item[data-v-551c67fe]{padding-top:32px;margin-top:32px;border-top:1px solid var(--color-border-default)}.o-purchaseNoteFlowChoiceModal__button+.o-purchaseNoteFlowChoiceModal__button[data-v-551c67fe]{margin-top:8px}.o-purchaseNoteFlowChoiceModal__title[data-v-551c67fe]{margin-bottom:16px;font-weight:600;text-align:center}",""]),n.locals={},e.exports=n},5841:function(e,t,r){"use strict";r(4756)},5842:function(e,t,r){var n=r(15)((function(i){return i[1]}));n.push([e.i,".o-premiumSubscribeModal__body[data-v-7f168298]{padding:24px}.o-premiumSubscribeModal__item[data-v-7f168298]{display:flex;margin-bottom:20px}.o-premiumSubscribeModal__cover[data-v-7f168298]{width:60px;height:60px;margin-right:20px;border:1px solid var(--color-border-default);border-radius:8px}.o-premiumSubscribeModal__name[data-v-7f168298]{font-weight:600}.o-premiumSubscribeModal__caution[data-v-7f168298]{font-size:var(--font-size-xs)}.o-premiumSubscribeModal__link[data-v-7f168298]{color:var(--color-text-secondary);text-decoration:underline}.o-premiumSubscribeModal__link[data-v-7f168298]:hover{color:var(--color-text-primary)}.o-premiumSubscribeModal__plan[data-v-7f168298]{padding:24px 24px 24px 40px;list-style-type:disc;background-color:var(--color-background-secondary);border:1px solid var(--color-border-default);border-radius:8px}.o-premiumSubscribeModal__price[data-v-7f168298]{margin-bottom:8px;font-size:var(--font-size-xl);font-weight:600;text-align:center}.o-premiumSubscribeModal__priceSub[data-v-7f168298]{display:inline;font-size:var(--font-size-xs);font-weight:400}.o-premiumSubscribeModal__attention[data-v-7f168298]{margin-top:16px}.o-premiumSubscribeModal__attentionItem[data-v-7f168298]{display:flex;align-content:center}.o-premiumSubscribeModal__attentionItem+.o-premiumSubscribeModal__attentionItem[data-v-7f168298]{margin-top:8px}.o-premiumSubscribeModal__attentionIcon[data-v-7f168298]{flex:0 0 auto;margin-right:8px;line-height:1.5;color:var(--color-text-primary)}.o-premiumSubscribeModal__attentionText[data-v-7f168298]{width:100%;font-size:var(--font-size-xs);font-weight:600;line-height:1.5;color:var(--color-text-secondary)}",""]),n.locals={},e.exports=n},6617:function(e,t,r){"use strict";r.r(t);var n=r(73),o=r(82),l=r(4419),c=r(54),d={components:{BasicModalContent:o.a,SupportShared:l.a,NtModal:n.a},mixins:[c.a],computed:{creator(){return this.$store.state.purchase.note?this.$store.state.purchase.note.user:null}},methods:{init(){var e;null===(e=this.$refs.supportShared)||void 0===e||e.init()},relayDecide(e){this.$emit("decide",e)}}},h=r(7),m=Object(h.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.creator?r("nt-modal",{attrs:{"disable-backdrop":!0,name:"purchaseSupport"},on:{"before-open":function(t){return e.init()}}},[r("basic-modal-content",{staticClass:"o-purchaseSupport"},[r("support-shared",{ref:"supportShared",attrs:{slot:"allParts","is-modal":!0},on:{decide:e.relayDecide,close:e.popModal},slot:"allParts"})],1)],1):e._e()}),[],!1,null,null,null).exports,v=r(1),_=r(5128),f=v.a.extend({components:{NtModal:n.a,BasicModalContent:o.a,OneshotContentShared:_.a},mixins:[c.a],computed:{actionType(){return this.$store.state.modal.purchaseModalContainer.actionType},note(){return this.$store.state.purchase.note},magazine(){return this.$store.state.purchase.magazine}},methods:{init(){var e;null===(e=this.$refs.oneshotContentShared)||void 0===e||e.init()},relayConfirm(e){this.$emit("confirm",e)},relayAfterPurchase(e){this.$emit("afterPurchase",e)},relayChangePaymentMethod(e){this.$emit("changePaymentMethod",e)}}}),y=Object(h.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return"note_purchase"===e.actionType&&e.note||"magazine_purchase"===e.actionType&&e.magazine?r("nt-modal",{attrs:{"disable-backdrop":!0,name:"purchaseOneshotContent"},on:{"before-open":function(t){return e.init()}}},[r("basic-modal-content",{attrs:{scrollable:!1}},[r("oneshot-content-shared",{ref:"oneshotContentShared",attrs:{slot:"allParts","is-modal":!0},on:{confirm:e.relayConfirm,afterPurchase:e.relayAfterPurchase,changePaymentMethod:e.relayChangePaymentMethod,close:e.popModal},slot:"allParts"})],1)],1):e._e()}),[],!1,null,null,null).exports,C=r(4416),x={components:{NtModal:n.a,BasicModalContent:o.a,PaymentMethodShared:C.a},mixins:[c.a],methods:{resetData(){var e;null===(e=this.$refs.paymentMethodShared)||void 0===e||e.resetData()},relayConfirm(e){this.$emit("confirm",e)},relayInputCard(e){this.$emit("inputCard",e)},moveToPurchaseOneshotContentModal(e){this.replacePurchaseOneshotContentModal(e)}}},M=Object(h.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.currentUser?r("nt-modal",{attrs:{"disable-backdrop":!0,name:"purchasePaymentMethod"},on:{"before-open":function(t){return e.resetData()}}},[r("basic-modal-content",[r("payment-method-shared",{ref:"paymentMethodShared",attrs:{slot:"allParts","is-modal":!0},on:{confirm:e.relayConfirm,moveToPurchaseOneshotContent:e.moveToPurchaseOneshotContentModal,inputCard:e.relayInputCard,close:function(t){return e.popModal()}},slot:"allParts"})],1)],1):e._e()}),[],!1,null,null,null).exports,w=r(4400),P={components:{BasicModalContent:o.a,NtModal:n.a,CreditCardInputShared:w.a},mixins:[c.a],methods:{init(){var e;null===(e=this.$refs.creditCardInputShared)||void 0===e||e.init()},relaySaved(e){this.$emit("saved",e)},confirm(){this.replacePurchaseNoteGuestConfirmModal({})}}},S=Object(h.a)(P,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nt-modal",{attrs:{"disable-backdrop":!0,name:"purchaseCreditCardInput"},on:{"before-open":function(t){return e.init()}}},[r("basic-modal-content",[r("credit-card-input-shared",{ref:"creditCardInputShared",attrs:{slot:"allParts","is-modal":!0},on:{saved:e.relaySaved,close:e.popModal,confirm:e.confirm},slot:"allParts"})],1)],1)}),[],!1,null,null,null).exports,k=r(4415),T=v.a.extend({components:{BasicModalContent:o.a,NtModal:n.a,ConfirmShared:k.a},mixins:[c.a],computed:{note(){return this.$store.state.purchase.note},magazine(){return this.$store.state.purchase.magazine}},methods:{init(){var e;null===(e=this.$refs.confirmShared)||void 0===e||e.init()},relaySelectPaymentMethod(e){this.$emit("selectPaymentMethod",e)},relayInputCard(e){this.$emit("inputCard",e)},relayAfterPurchase(e){this.$emit("afterPurchase",e)}}}),A=Object(h.a)(T,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.note||e.magazine?r("nt-modal",{attrs:{"disable-backdrop":!0,name:"purchaseSupportConfirm"},on:{"before-open":function(t){return e.init()}}},[r("basic-modal-content",[r("confirm-shared",{ref:"confirmShared",attrs:{slot:"allParts","is-modal":!0},on:{selectPaymentMethod:e.relaySelectPaymentMethod,inputCard:e.relayInputCard,afterPurchase:e.relayAfterPurchase,close:e.popModal},slot:"allParts"})],1)],1):e._e()}),[],!1,null,null,null).exports,z=r(43),N={components:{BasicModalContent:o.a,NtButton:z.a,NtModal:n.a},mixins:[c.a],computed:{note(){return this.$store.state.purchase.note},showGuestPurchase(){return this.note&&"SoundNote"!==this.note.type}},methods:{toLoginPage(){window.location.href=this.$path.loginPath()},toSignupPage(){window.location.href=this.$path.signupPath()}}},E=(r(5839),Object(h.a)(N,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nt-modal",{attrs:{name:"purchaseNoteFlowChoice"}},[r("basic-modal-content",[r("div",{staticClass:"o-purchaseNoteFlowChoiceModal",attrs:{slot:"body"},slot:"body"},[r("section",{staticClass:"o-purchaseNoteFlowChoiceModal__item"},[r("h1",{staticClass:"o-purchaseNoteFlowChoiceModal__title"},[e._v("\n          アカウントをお持ちの方\n        ")]),e._v(" "),r("nt-button",{staticClass:"o-purchaseNoteFlowChoiceModal__button",attrs:{type:"primary",size:"large",width:"fit"},on:{click:function(t){return e.toLoginPage()}}},[e._v("\n          ログインして購入\n        ")]),e._v(" "),r("nt-button",{staticClass:"o-purchaseNoteFlowChoiceModal__button",attrs:{type:"basic",width:"fit"},on:{click:function(t){return e.toSignupPage()}}},[e._v("\n          会員登録して購入\n        ")])],1),e._v(" "),e.showGuestPurchase?r("section",{staticClass:"o-purchaseNoteFlowChoiceModal__item"},[r("h1",{staticClass:"o-purchaseNoteFlowChoiceModal__title"},[e._v("\n          アカウントをお持ちでない方\n        ")]),e._v(" "),r("nt-button",{staticClass:"o-purchaseNoteFlowChoiceModal__button",attrs:{type:"primary",size:"large",width:"fit"},on:{click:function(t){return e.replacePurchaseCreditCardInputModal({})}}},[e._v("\n          そのまま購入\n        ")])],1):e._e()]),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("nt-button",{attrs:{size:"small",type:"basic"},on:{click:function(t){return e.popModal()}}},[e._v("\n        閉じる\n      ")])],1)])],1)}),[],!1,null,"551c67fe",null).exports),$=r(0),O=r(4423),L={components:{BasicModalContent:o.a,NoteGuestConfirmShared:O.a,NtModal:n.a},mixins:[c.a],methods:{init(){var e;null===(e=this.$refs.noteGuestConfirmShared)||void 0===e||e.init()},relayAfterPurchase(){var e=this;return Object($.a)((function*(){e.$emit("afterPurchase",{purchaseResult:e.$store.state.purchase.successed})}))()},callReplacePurchaseCreditCardInputModal(){this.replacePurchaseCreditCardInputModal({})}}},I=Object(h.a)(L,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nt-modal",{attrs:{"disable-backdrop":!0,name:"purchaseNoteGuestConfirm"},on:{"before-open":function(t){return e.init()}}},[r("basic-modal-content",{attrs:{scrollable:!1}},[r("note-guest-confirm-shared",{ref:"noteGuestConfirmShared",attrs:{slot:"allParts","is-modal":!0},on:{"input-card":e.callReplacePurchaseCreditCardInputModal,close:e.popModal,"after-purchase":e.relayAfterPurchase},slot:"allParts"})],1)],1)}),[],!1,null,null,null).exports,j=r(57),U=r(193),G=r(4422),F=v.a.extend({components:{BasicModalContent:o.a,NtModal:n.a,NoteGuestCompleteShared:G.a},mixins:[c.a,U.a],data:()=>({registerCompleted:!1}),methods:{init(){var e;null===(e=this.$refs.noteGuestCompleteShared)||void 0===e||e.init()},afterRegister(){this.registerCompleted=!0},deinit(){this.$store.dispatch(j.PURCHASE_ACTION_TYPES.RESET_GUEST_CREDITCARD)},closeAndReload(){this.$path.reloadCurrentPath(),this.popModal()}}}),R=Object(h.a)(F,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nt-modal",{attrs:{"disable-backdrop":!0,name:"purchaseNoteGuestComplete"},on:{"before-open":function(t){return e.init()},closed:function(t){return e.deinit()}}},[r("basic-modal-content",{attrs:{scrollable:!1}},[r("note-guest-complete-shared",{ref:"noteGuestCompleteShared",attrs:{slot:"allParts","is-modal":!0,"register-completed":e.registerCompleted},on:{"after-register":e.afterRegister,"close-after-signup":e.closeAndReload,"close-without-signup":e.popModal},slot:"allParts"})],1)],1)}),[],!1,null,null,null).exports,D=r(4414),B=v.a.extend({components:{AfterPurchaseShared:D.a,BasicModalContent:o.a,NtModal:n.a},mixins:[c.a],computed:{modalName:()=>"afterPurchaseMessage"},methods:{init(){var e;null===(e=this.$refs.afterPurchaseShared)||void 0===e||e.init()},close(){this.popModal(),this.$emit("closed",{actionType:this.actionType})}}}),Y=Object(h.a)(B,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nt-modal",{attrs:{"disable-backdrop":!0,name:e.modalName},on:{"before-open":function(t){return e.init()}}},[r("basic-modal-content",{staticClass:"o-afterPurchaseMessageModal"},[r("after-purchase-shared",{ref:"afterPurchaseShared",attrs:{slot:"allParts","is-modal":!0},on:{close:e.close},slot:"allParts"})],1)],1)}),[],!1,null,null,null).exports,H=r(4399),K=v.a.extend({components:{NtModal:n.a,BasicModalContent:o.a,SubscribeMagazineShared:H.a},mixins:[c.a],computed:{magazine(){return this.$store.state.purchase.magazine}},methods:{init(){var e;null===(e=this.$refs.subscribeMagazineShared)||void 0===e||e.init()},relayInputCard(e){this.$emit("inputCard",e)},relayAfterPurchase(e){this.$emit("afterPurchase",e)}}}),W=Object(h.a)(K,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.magazine?r("nt-modal",{attrs:{"disable-backdrop":!0,name:"purchaseSubscribeMagazine"},on:{"before-open":function(t){return e.init()}}},[r("basic-modal-content",{attrs:{scrollable:!1}},[r("subscribe-magazine-shared",{ref:"subscribeMagazineShared",attrs:{slot:"allParts","is-modal":!0},on:{inputCard:e.relayInputCard,afterPurchase:e.relayAfterPurchase,close:e.popModal},slot:"allParts"})],1)],1):e._e()}),[],!1,null,null,null).exports,Q=r(2977),V=r(33),J=r(4404),Z=v.a.extend({components:{NtModal:n.a,BasicModalContent:o.a,SubscribePremiumShared:J.a},mixins:[c.a,U.a],data:()=>({apiError:null}),computed:{premiumPlan(){return this.$store.state.modal.purchaseModalContainer.premiumPlan},nextChargesAt(){return Object(Q.b)(this.premiumPlan.nextChargesAt,"YYYY年M月D日")}},methods:{closeModal(){var e=this;return Object($.a)((function*(){yield e.$store.dispatch(V.USER_ACTION_TYPES.AUTH),e.popModal()}))()},callReplacePurchaseCreditCardInputModal(e){var{supportPrice:t,supportMessage:r,paymentMethod:n}=e;this.replacePurchaseCreditCardInputModal({supportPrice:t,supportMessage:r,paymentMethod:n})},callAfterPurchase(e){var t=this;return Object($.a)((function*(){t.$emit("afterPurchase",{purchaseResponse:e})}))()}}}),X=(r(5841),Object(h.a)(Z,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nt-modal",{staticClass:"o-premiumSubscribeModal",attrs:{name:"purchaseSubscribePremium"}},[r("basic-modal-content",[r("subscribe-premium-shared",{attrs:{slot:"allParts"},on:{inputCard:e.callReplacePurchaseCreditCardInputModal,afterPurchase:e.callAfterPurchase,close:e.closeModal},slot:"allParts"})],1)],1)}),[],!1,null,"7f168298",null).exports),ee=r(4403),te=r(3155),ae=r(118),se=v.a.extend({components:{BasicModalContent:o.a,NtModal:n.a,SubscribeMembershipPlanShared:ee.a},mixins:[c.a,te.a],computed:{plan(){return this.$store.state.modal.subscribeMembershipPlan.plan}},mounted(){this.mountModals("subscribeMembershipPlanComplete","unsubscribeMembershipPlan")},methods:{init(){var e;null===(e=this.$refs.subscribeMembershipPlanShared)||void 0===e||e.init()},afterSubscribe(e){var t,r=this,{thanksMessage:n}=e;this.replaceSubscribeMembershipPlanCompleteModal({plan:this.plan,thanksMessage:n,closeCallback:(t=Object($.a)((function*(){var e=r.$store.state.pages.noteDetail.data;if(null!==e&&"note-detail"===r.$store.state.purchase.beforePurchasingPlace)yield r.afterPurchaseFromNote(e),r.$modal.pop();else{var t=r.plan.circle.key,n=r.$path.contentPath({contentType:"membership",content:r.plan.circle.owner});try{var o=yield Object(ae.c)(r.$axios,t),{data:data}=o;data.length>0?window.location.href="".concat(n,"/notes"):window.location.href=n}catch(e){window.location.href=n}}})),function(){return t.apply(this,arguments)})})},openUnsubscribeModal(){var e={plan:this.plan,owner:this.plan.circle.owner,unsubscribeCallback:()=>{window.location.reload()}};this.replaceUnsubscribeMembershipPlanModal(e)}}}),re=se,ie={components:{PurchaseSupportModal:m,PurchaseOneshotContentModal:y,PurchasePaymentMethodModal:M,PurchaseCreditCardInputModal:S,PurchaseConfirmModal:A,PurchaseNoteFlowChoiceModal:E,PurchaseNoteGuestConfirmModal:I,PurchaseNoteGuestCompleteModal:R,AfterPurchaseMessageModal:Y,PurchaseSubscribeMagazineModal:W,PurchaseSubscribePremiumModal:X,SubscribeMembershipPlanModal:Object(h.a)(re,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.plan?r("nt-modal",{attrs:{"disable-backdrop":!1,name:"subscribeMembershipPlan"},on:{"before-open":e.init}},[r("basic-modal-content",{staticClass:"o-subscribeMembershipPlanModal"},[r("subscribe-membership-plan-shared",{ref:"subscribeMembershipPlanShared",attrs:{slot:"allParts","is-modal":!0,plan:e.plan},on:{"after-subscribe":e.afterSubscribe,"click-unsubscribe":e.openUnsubscribeModal,"click-cancel":e.popModal,"input-card":function(t){return e.$emit("input-card",{})}},slot:"allParts"})],1)],1):e._e()}),[],!1,null,null,null).exports},mixins:[c.a,te.a]},ne=Object(h.a)(ie,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.isLoggedIn?[r("purchase-support-modal",{on:{decide:e.replacePurchaseConfirmModal}}),e._v(" "),r("purchase-oneshot-content-modal",{on:{confirm:e.replacePurchaseConfirmModal,afterPurchase:e.afterPurchase,changePaymentMethod:e.replacePurchasePaymentMethodModal}}),e._v(" "),r("purchase-subscribe-magazine-modal",{on:{inputCard:e.replacePurchaseCreditCardInputModal,afterPurchase:e.afterPurchase}}),e._v(" "),r("purchase-subscribe-premium-modal",{on:{inputCard:e.replacePurchaseCreditCardInputModal,afterPurchase:e.afterPurchase}}),e._v(" "),r("subscribe-membership-plan-modal",{on:{"input-card":e.replacePurchaseCreditCardInputModal}}),e._v(" "),r("purchase-confirm-modal",{on:{selectPaymentMethod:e.replacePurchasePaymentMethodModal,inputCard:e.replacePurchaseCreditCardInputModal,afterPurchase:e.afterPurchase}})]:[r("purchase-note-flow-choice-modal"),e._v(" "),r("purchase-note-guest-confirm-modal",{on:{afterPurchase:e.afterGuestPurchase}})],e._v(" "),r("purchase-note-guest-complete-modal"),e._v(" "),r("purchase-payment-method-modal",{on:{confirm:e.confirm,inputCard:e.replacePurchaseCreditCardInputModal}}),e._v(" "),r("purchase-credit-card-input-modal",{on:{saved:e.savedCreditCard}}),e._v(" "),r("after-purchase-message-modal",{on:{closed:e.closedAfterPurchaseMessage}})],2)}),[],!1,null,null,null);t.default=ne.exports}}]);