(window.webpackJsonp=window.webpackJsonp||[]).push([[190],{3396:function(t,e,r){"use strict";r(19),r(28);var o=r(603);e.a={computed:{topic(){return this.$store.state.topic.topic},topicPages(){return this.$store.state.topic.pages},topicCurrentPage(){return this.$store.state.topic.currentPage},topicCurrentSection(){var t;return null===(t=this.$store.state.topic.sections)||void 0===t?void 0:t.find(((t,e)=>0===e))},isTopicFollowable(){return!this.$store.state.topic.isFollowing},isTopicAdminUser(){var t;return null===(t=this.topic)||void 0===t?void 0:t.isTopicAdminUser},isTopicOfficial(){var t;return null===(t=this.topic)||void 0===t?void 0:t.isOfficial},isTopicCustomDomain(){var t;return!!(null===(t=this.topic)||void 0===t?void 0:t.customDomain)}},methods:{isTopicRoute:t=>o.TOPIC_DEFULT_ROUTES.includes(t)||o.TOPIC_OFFICIAL_EXCEPTION_ROUTES.includes(t),isTopicNavbarTop:t=>o.TOPIC_NAVBAR_TOP_ROUTES.includes(t)}}},4713:function(t,e,r){var content=r(5752);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(16).default)("78d9ab31",content,!0,{sourceMap:!1})},5751:function(t,e,r){"use strict";r(4713)},5752:function(t,e,r){var o=r(15)((function(i){return i[1]}));o.push([t.i,".o-navBar[data-v-1339646a]{position:relative;background-color:var(--color-surface-normal);border:none;transition:transform .3s ease}@media only screen and (max-width:768px){.o-navBar[data-v-1339646a]{border-bottom:1px solid var(--color-border-default);box-shadow:none}}.o-navBar.is-sticky[data-v-1339646a]{position:-webkit-sticky;position:sticky;top:0;z-index:21;border-bottom:1px solid var(--color-border-default);transition:transform .3s ease;transform:translate(0)}@media print{.o-navBar.is-sticky[data-v-1339646a]{display:none}}.o-navBar.is-stickyActive1[data-v-1339646a]{transform:translateY(-100%)}.o-navBar.is-stickyActive1 .o-navBar__creator[data-v-1339646a]{max-height:100px;visibility:visible;opacity:1;transition:opacity .3s}.o-navBar.is-stickyActive2[data-v-1339646a]{transform:translate(0)}.o-navBar.is-stickyHide[data-v-1339646a]{transform:translateY(-200%)}.o-navBar.is-stickyHide .o-navBar__creator[data-v-1339646a]{visibility:hidden;transition:max-height .3s ease,opacity 0s .3s,visibility 0s .3s}.o-navBar__creator[data-v-1339646a]{position:absolute;top:64px;left:0;width:100%;max-height:0;visibility:hidden;opacity:0}@media only screen and (max-width:480px){.o-navBar__creator[data-v-1339646a]{top:48px}}",""]),o.locals={},t.exports=o},6711:function(t,e,r){"use strict";r.r(e);r(11),r(26),r(12),r(18),r(19),r(14),r(28);var o=r(1),n=r(61),h=r(2866),l=r(10),d=r(550),c=r(255),v=r(3396),m=r(624),w=r(6);class f{constructor(t){this.tinyDiffThreshold=5,this.pageTopThreshold=132,this.context=t,this.lastScrollY=this.getScrollY(),this.lastOffsetHeight=this.getOffsetHeight(),this.upwardSum=0,this.upwardThreshold=this.context.$ua.isFromSmartphone()?200:300,this.showNavbar=!0}calc(){var t=this.getScrollY(),e=this.getOffsetHeight(),r=0<=this.lastScrollY-t,o=Math.abs(this.lastScrollY-t),n=Math.abs(this.lastOffsetHeight-e);if(this.lastScrollY=t,this.lastOffsetHeight=e,t<=this.pageTopThreshold){var h=.01*window.innerHeight;return document.documentElement.style.setProperty("--ih","".concat(h,"px")),this.showNavbar=!0,void(this.upwardSum=0)}0<n?this.upwardSum=0:o<this.tinyDiffThreshold||(r?this.moveUpward(o):this.moveDownward())}moveUpward(t){if(this.upwardSum+=t,!this.showNavbar){this.showNavbar=this.upwardThreshold<this.upwardSum;var e=.01*window.innerHeight;document.documentElement.style.setProperty("--ih","".concat(e,"px"))}}moveDownward(){if(!1!==this.showNavbar){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--ih","".concat(t,"px"))}this.upwardSum=0,this.showNavbar=!1}getOffsetHeight(){return document.documentElement.offsetHeight}getScrollY(){return Math.max(0,window.pageYOffset||document.documentElement.scrollTop)}}class N{constructor(t){this.tinyDiffThreshold=5,this.pageTopThreshold=60,this.context=t,this.lastScrollY=this.getScrollY(),this.lastOffsetHeight=this.getOffsetHeight(),this.upwardSum=0,this.upwardThreshold=this.context.$ua.isFromSmartphone()?200:300,this.showNavbar=!0,this.showCreatorHeader=!1}calc(){var t=this.getScrollY(),e=this.getOffsetHeight(),r=0<=this.lastScrollY-t,o=Math.abs(this.lastScrollY-t),n=Math.abs(this.lastOffsetHeight-e);if(this.lastScrollY=t,this.lastOffsetHeight=e,t<=this.pageTopThreshold){this.showNavbar=!0,this.showCreatorHeader=!1,this.upwardSum=0;var h=.01*window.innerHeight;document.documentElement.style.setProperty("--ih","".concat(h,"px"))}else 0<n?this.upwardSum=0:o<this.tinyDiffThreshold||(r?this.moveUpward(o):this.moveDownward())}moveUpward(t){if(this.upwardSum+=t,this.showNavbar&&this.showCreatorHeader);else if(this.showNavbar&&!this.showCreatorHeader){if(this.showNavbar){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--ih","".concat(e,"px"))}this.showNavbar=!1,this.showCreatorHeader=!0}else if(!this.showNavbar&&this.showCreatorHeader){var r=.01*window.innerHeight;document.documentElement.style.setProperty("--ih","".concat(r,"px")),this.showNavbar=this.upwardThreshold<this.upwardSum}else this.showCreatorHeader=!0}moveDownward(){if(this.upwardSum=0,this.showNavbar){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--ih","".concat(t,"px"))}this.showNavbar=!1,this.showCreatorHeader=!0}getOffsetHeight(){return document.documentElement.offsetHeight}getScrollY(){return Math.max(0,window.pageYOffset||document.documentElement.scrollTop)}}var S=o.a.extend({components:{NavbarNoteDetail:()=>r.e(192).then(r.bind(null,6918)),NavbarPrimary:()=>Promise.all([r.e(367),r.e(193)]).then(r.bind(null,6721)),NavbarPrimaryGuest:()=>Promise.all([r.e(368),r.e(194)]).then(r.bind(null,6919)),NavbarPrimaryPlain:()=>Promise.all([r.e(369),r.e(195)]).then(r.bind(null,6920))},mixins:[v.a],props:{isErrorPage:{type:Boolean,default:!1}},data:()=>({noteDetailHeaderBehavior:null,navbarHeaderBehavior:null}),computed:Object.assign(Object.assign({},Object(n.e)(m.moduleName,["showNavbar","isCreatorProfileVisibleOrAbove"])),{computedHeaderClass(){var t,e,r,o,n=[];if(this.isNoteDetailPage){var h=null===(e=null===(t=this.noteDetailHeaderBehavior)||void 0===t?void 0:t.showNavbar)||void 0===e||e;n.push("is-sticky"),h||this.isShowCreatorHeader?!h&&this.isShowCreatorHeader?n.push("is-stickyActive1"):h&&!this.isShowCreatorHeader||n.push("is-stickyActive2"):n.push("is-stickyHide")}else if(this.$ua.isFromSmartphone()){var l=null===(o=null===(r=this.navbarHeaderBehavior)||void 0===r?void 0:r.showNavbar)||void 0===o||o;n.push("is-sticky"),!1===l&&n.push("is-stickyHide")}return n},navbarNoteDetailClass(){return[this.isShowCreatorHeader?"active":""]},isNoteDetailPage(){return["n-key","urlname-n-key"].includes(this.$route.name)&&!this.isErrorPage},isShowCreatorHeader(){var t,e;return null!==(e=null===(t=this.noteDetailHeaderBehavior)||void 0===t?void 0:t.showCreatorHeader)&&void 0!==e&&e&&!this.isCreatorProfileVisibleOrAbove},isPersonalized(){var t;return this.$store.state.currentDomain!==l.defaultDomain&&((null===(t=this.$store.state.metadata.customDomain)||void 0===t?void 0:t.isNoteComponentOff)||!1)}}),watch:{$route(){this.setNavbar(),this.removeScrollEventListener(),this.setScrollEventListenerIfNeed()}},updated(){this.notifyNavbarHeight()},created(){this.setNavbar()},mounted(){this.setScrollEventListenerIfNeed(),this.notifyNavbarHeight()},beforeDestroy(){this.removeScrollEventListener()},methods:Object.assign(Object.assign({},Object(n.b)({setShowNavbar:m.NAVBAR_ACTION_TYPES.SET_SHOW_NAVBAR,setNavbarHeight:m.NAVBAR_ACTION_TYPES.SET_NAVBAR_HEIGHT,setIsShowingNoteDetailNavbar:w.NOTE_DETAIL_ACTION_TYPES.SET_IS_SHOWING_NAVBAR})),{setNavbar(){var t=/(note-android|iPhone note)/.test(this.$ua.original());this.setShowNavbar(!d.pageNamesToHide.includes(this.$route.name)&&!t)},removeScrollEventListener(){window.removeEventListener("scroll",this.handleNoteDetailScroll),window.removeEventListener("scroll",this.handleScroll)},getNavbarHeight(){var{$el:t}=this;return t?t.offsetHeight:0},setScrollEventListenerIfNeed(){this.isNoteDetailPage?Object(c.a)((()=>{this.noteDetailHeaderBehavior=new N(this),window.addEventListener("scroll",this.handleNoteDetailScroll,{passive:!0})})):this.$ua.isFromSmartphone()&&Object(c.a)((()=>{this.navbarHeaderBehavior=new f(this),window.addEventListener("scroll",this.handleScroll,{passive:!0})}))},handleScroll:Object(h.a)((function(){this.navbarHeaderBehavior.calc()}),100),handleNoteDetailScroll:Object(h.a)((function(){this.noteDetailHeaderBehavior.calc(),this.setIsShowingNoteDetailNavbar(this.noteDetailHeaderBehavior.showNavbar)}),100),notifyNavbarHeight(){this.$refs.container&&this.setNavbarHeight(this.$refs.container.offsetHeight)}})}),H=(r(5751),r(7)),component=Object(H.a)(S,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.showNavbar?r("header",{ref:"container",staticClass:"o-navBar",class:t.computedHeaderClass},[t.isPersonalized?r("navbar-primary-plain"):t.currentUser?r("navbar-primary"):r("navbar-primary-guest"),t._v(" "),t.isNoteDetailPage&&t.$ua.isFromSmartphone()?r("navbar-note-detail",{staticClass:"o-navBar__creator",class:t.navbarNoteDetailClass,attrs:{"is-personalized":t.isPersonalized}}):t._e()],1):t._e()}),[],!1,null,"1339646a",null);e.default=component.exports}}]);